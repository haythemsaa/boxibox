import{C as w}from"./ClientLayout-DE-sKSWk.js";import{r as S,f as C,o as a,w as D,a as e,g as f,h as _,v as F,l as g,d as m,c as n,i as y,F as p,j as b,n as v,t as o,x as h}from"./app-zGlaTtug.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const T={components:{ClientLayout:w},props:{evenements:{type:Object,required:!0},queryParams:{type:Object,default:()=>({})}},data(){return{filters:{type:this.queryParams.type||"",date_debut:this.queryParams.date_debut||"",date_fin:this.queryParams.date_fin||""}}},methods:{applyFilters(){h.get(route("client.suivi"),this.filters,{preserveState:!0,preserveScroll:!0})},changePage(i){i<1||i>this.evenements.last_page||h.get(route("client.suivi"),{...this.filters,page:i},{preserveState:!0,preserveScroll:!0})},formatDate(i){return i?new Date(i).toLocaleDateString("fr-FR"):""},formatTime(i){return i?new Date(i).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):""}}},L={class:"card mb-4"},V={class:"card-body"},j={class:"col-md-3"},q={class:"col-md-3"},A={class:"col-md-3"},B={class:"card"},M={class:"card-body"},R={key:0,class:"timeline"},z={class:"timeline-marker"},N={class:"timeline-content"},U={class:"card"},E={class:"card-body"},O={class:"d-flex justify-content-between align-items-start"},I={class:"flex-grow-1"},G={class:"mb-1"},H={class:"text-muted mb-2"},J={class:"row small text-muted"},K={key:0,class:"mt-2"},Q=["href"],W={class:"flex-shrink-0 ms-3 text-end"},X={class:"text-muted"},Y={key:1,class:"text-center py-5"},Z={key:0,class:"card-footer bg-white"},$={class:"d-flex justify-content-between align-items-center"},ee={class:"text-muted small"},te={class:"pagination pagination-sm mb-0"};function se(i,t,l,le,r,d){const x=S("ClientLayout");return a(),C(x,{title:"Suivi d'Activité"},{default:D(()=>[t[14]||(t[14]=e("div",{class:"mb-4"},[e("h1",{class:"h3"},"Suivi d'Activité"),e("p",{class:"text-muted"},"Chronologie de tous vos événements")],-1)),e("div",L,[e("div",V,[e("form",{onSubmit:t[3]||(t[3]=f((...s)=>d.applyFilters&&d.applyFilters(...s),["prevent"])),class:"row g-3"},[e("div",j,[t[7]||(t[7]=e("label",{class:"form-label small text-muted"},"Type d'événement",-1)),_(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.filters.type=s),class:"form-select"},[...t[6]||(t[6]=[e("option",{value:""},"Tous les types",-1),e("option",{value:"contrat"},"Contrats",-1),e("option",{value:"facture"},"Factures",-1),e("option",{value:"reglement"},"Règlements",-1),e("option",{value:"relance"},"Relances",-1),e("option",{value:"document"},"Documents",-1),e("option",{value:"sepa"},"SEPA",-1)])],512),[[F,r.filters.type]])]),e("div",q,[t[8]||(t[8]=e("label",{class:"form-label small text-muted"},"Date de début",-1)),_(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=s=>r.filters.date_debut=s),class:"form-control"},null,512),[[g,r.filters.date_debut]])]),e("div",A,[t[9]||(t[9]=e("label",{class:"form-label small text-muted"},"Date de fin",-1)),_(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=s=>r.filters.date_fin=s),class:"form-control"},null,512),[[g,r.filters.date_fin]])]),t[10]||(t[10]=e("div",{class:"col-md-3 d-flex align-items-end"},[e("button",{type:"submit",class:"btn btn-primary w-100"},[e("i",{class:"fas fa-filter me-1"}),m("Filtrer ")])],-1))],32)])]),e("div",B,[t[13]||(t[13]=e("div",{class:"card-header bg-white"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-history me-2"}),m("Timeline")])],-1)),e("div",M,[l.evenements.data&&l.evenements.data.length>0?(a(),n("div",R,[(a(!0),n(p,null,b(l.evenements.data,(s,k)=>(a(),n("div",{key:k,class:"timeline-item mb-4"},[e("div",z,[e("span",{class:v(`badge ${s.badge_class}`)},[e("i",{class:v(`fas ${s.icon}`)},null,2)],2)]),e("div",N,[e("div",U,[e("div",E,[e("div",O,[e("div",I,[e("h6",G,o(s.titre),1),e("p",H,o(s.description),1),e("div",J,[(a(!0),n(p,null,b(s.details,(u,c)=>(a(),n("div",{key:c,class:"col-auto"},[e("strong",null,o(c)+":",1),m(" "+o(u),1)]))),128))]),s.actions&&s.actions.length>0?(a(),n("div",K,[(a(!0),n(p,null,b(s.actions,(u,c)=>(a(),n("a",{key:c,href:u.route,class:"btn btn-sm btn-outline-primary me-2"},o(u.label),9,Q))),128))])):y("",!0)]),e("div",W,[e("small",X,[m(o(d.formatDate(s.date))+" ",1),t[11]||(t[11]=e("br",null,null,-1)),m(" "+o(d.formatTime(s.date)),1)])])])])])])]))),128))])):(a(),n("div",Y,[...t[12]||(t[12]=[e("i",{class:"fas fa-history fa-3x text-muted mb-3 d-block"},null,-1),e("p",{class:"text-muted mb-1"},"Aucun événement trouvé",-1),e("small",{class:"text-muted"},"Modifiez vos filtres ou attendez de nouveaux événements",-1)])]))]),l.evenements.last_page>1?(a(),n("div",Z,[e("div",$,[e("div",ee," Affichage de "+o(l.evenements.from)+" à "+o(l.evenements.to)+" sur "+o(l.evenements.total)+" événements ",1),e("nav",null,[e("ul",te,[e("li",{class:v(["page-item",{disabled:!l.evenements.prev_page_url}])},[e("a",{class:"page-link",onClick:t[4]||(t[4]=f(s=>d.changePage(l.evenements.current_page-1),["prevent"]))}," Précédent ")],2),e("li",{class:v(["page-item",{disabled:!l.evenements.next_page_url}])},[e("a",{class:"page-link",onClick:t[5]||(t[5]=f(s=>d.changePage(l.evenements.current_page+1),["prevent"]))}," Suivant ")],2)])])])])):y("",!0)])]),_:1})}const re=P(T,[["render",se],["__scopeId","data-v-4619ca32"]]);export{re as default};
