import{C as _}from"./ClientLayout-Dkl03K-0.js";import{r as h,f as v,o as r,w as p,a as e,c as i,i as m,F as y,j as x,t as o,n as u,d,g,x as k}from"./app-BhQbKMjd.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const M={components:{ClientLayout:_},props:{relances:{type:Object,required:!0}},methods:{changePage(t){t<1||t>this.relances.last_page||k.get(route("client.relances"),{page:t},{preserveState:!0,preserveScroll:!0})},formatDate(t){return t?new Date(t).toLocaleDateString("fr-FR"):""},timeAgo(t){if(!t)return"";const s=new Date(t),f=Math.abs(new Date-s),c=Math.ceil(f/(1e3*60*60*24));if(c<7)return`Il y a ${c} jour${c>1?"s":""}`;if(c<30){const a=Math.floor(c/7);return`Il y a ${a} semaine${a>1?"s":""}`}else{if(c<365)return`Il y a ${Math.floor(c/30)} mois`;{const a=Math.floor(c/365);return`Il y a ${a} an${a>1?"s":""}`}}},formatAmount(t){return t?parseFloat(t).toFixed(2):"0.00"},getNiveauBadgeClass(t){return{1:"badge bg-info",2:"badge bg-warning",3:"badge bg-danger"}[t]||"badge bg-secondary"},getNiveauLabel(t){return{1:"1ère Relance",2:"2ème Relance",3:"Mise en Demeure"}[t]||`Niveau ${t}`},getModeIcon(t){return{email:"fas fa-envelope text-primary",courrier:"fas fa-mail-bulk text-info",sms:"fas fa-sms text-success"}[t]||"fas fa-question"},getModeLabel(t){return{email:"Email",courrier:"Courrier",sms:"SMS"}[t]||t.charAt(0).toUpperCase()+t.slice(1)},getStatutBadgeClass(t){return{envoye:"badge bg-success",en_attente:"badge bg-warning",regle:"badge bg-primary"}[t]||"badge bg-secondary"},getStatutIcon(t){return{envoye:"fas fa-check",en_attente:"fas fa-clock",regle:"fas fa-check-double"}[t]||"fas fa-question"},getStatutLabel(t){return{envoye:"Envoyé",en_attente:"En attente",regle:"Réglé"}[t]||t.charAt(0).toUpperCase()+t.slice(1)}}},S={class:"card"},w={class:"card-body p-0"},L={class:"table-responsive"},A={class:"table table-hover align-middle mb-0"},D={class:"text-muted"},I=["href"],N={key:1,class:"text-muted"},B={key:2},R={key:3,class:"text-muted"},q={class:"text-end"},E={class:"text-danger"},F={key:0,href:"#",class:"btn btn-sm btn-outline-secondary",title:"Télécharger"},P={key:1,class:"text-muted"},j={key:0},T={key:0,class:"card-footer bg-white"},V={class:"d-flex justify-content-between align-items-center"},z={class:"text-muted small"},U={class:"pagination pagination-sm mb-0"},H={class:"alert alert-info mt-4"},O={class:"mb-0 small"},G=["href"];function J(t,s,n,f,c,a){const b=h("ClientLayout");return r(),v(b,{title:"Mes Relances"},{default:p(()=>[s[9]||(s[9]=e("div",{class:"mb-4"},[e("h1",{class:"h3"},"Mes Relances"),e("p",{class:"text-muted"},"Historique des rappels de paiement")],-1)),e("div",S,[e("div",w,[e("div",L,[e("table",A,[s[5]||(s[5]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Date Rappel"),e("th",null,"Facture Concernée"),e("th",null,"Type"),e("th",null,"Mode d'Envoi"),e("th",{class:"text-end"},"Montant"),e("th",null,"Statut"),e("th",null,"Actions")])],-1)),e("tbody",null,[(r(!0),i(y,null,x(n.relances.data,l=>(r(),i("tr",{key:l.id},[e("td",null,[e("strong",null,o(a.formatDate(l.date_rappel)),1),s[2]||(s[2]=e("br",null,null,-1)),e("small",D,o(a.timeAgo(l.date_rappel)),1)]),e("td",null,[l.facture?(r(),i("a",{key:0,href:t.route("client.factures.show",l.facture.id),class:"text-decoration-none"},o(l.facture.numero_facture),9,I)):(r(),i("span",N,"N/A")),l.facture?(r(),i("br",B)):m("",!0),l.facture?(r(),i("small",R,o(a.formatDate(l.facture.date_emission)),1)):m("",!0)]),e("td",null,[e("span",{class:u(a.getNiveauBadgeClass(l.niveau))},o(a.getNiveauLabel(l.niveau)),3)]),e("td",null,[e("i",{class:u([a.getModeIcon(l.mode_envoi),"me-1"])},null,2),d(" "+o(a.getModeLabel(l.mode_envoi)),1)]),e("td",q,[e("strong",E,o(a.formatAmount(l.montant_du))+" € ",1)]),e("td",null,[e("span",{class:u(a.getStatutBadgeClass(l.statut))},[e("i",{class:u([a.getStatutIcon(l.statut),"me-1"])},null,2),d(" "+o(a.getStatutLabel(l.statut)),1)],2)]),e("td",null,[l.document_path?(r(),i("a",F,[...s[3]||(s[3]=[e("i",{class:"fas fa-file-pdf"},null,-1)])])):(r(),i("span",P,"-"))])]))),128)),!n.relances.data||n.relances.data.length===0?(r(),i("tr",j,[...s[4]||(s[4]=[e("td",{colspan:"7",class:"text-center py-5"},[e("i",{class:"fas fa-bell fa-3x text-muted mb-3 d-block"}),e("p",{class:"text-muted mb-1"},"Aucune relance"),e("small",{class:"text-muted"},"Vos paiements sont à jour !")],-1)])])):m("",!0)])])]),n.relances.last_page>1?(r(),i("div",T,[e("div",V,[e("div",z," Affichage de "+o(n.relances.from)+" à "+o(n.relances.to)+" sur "+o(n.relances.total)+" relances ",1),e("nav",null,[e("ul",U,[e("li",{class:u(["page-item",{disabled:!n.relances.prev_page_url}])},[e("a",{class:"page-link",onClick:s[0]||(s[0]=g(l=>a.changePage(n.relances.current_page-1),["prevent"]))}," Précédent ")],2),e("li",{class:u(["page-item",{disabled:!n.relances.next_page_url}])},[e("a",{class:"page-link",onClick:s[1]||(s[1]=g(l=>a.changePage(n.relances.current_page+1),["prevent"]))}," Suivant ")],2)])])])])):m("",!0)])]),e("div",H,[s[8]||(s[8]=e("h6",{class:"alert-heading"},[e("i",{class:"fas fa-info-circle me-2"}),d("À propos des relances")],-1)),e("p",O,[s[6]||(s[6]=d(" Les relances sont envoyées automatiquement pour les factures impayées après l'échéance. Pour éviter les relances, pensez à activer le prélèvement automatique via ",-1)),e("a",{href:t.route("client.sepa"),class:"alert-link"},"les mandats SEPA",8,G),s[7]||(s[7]=d(". ",-1))])])]),_:1})}const Y=C(M,[["render",J],["__scopeId","data-v-dbe3cc18"]]);export{Y as default};
