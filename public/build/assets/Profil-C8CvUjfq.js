import{C as k,u as _}from"./ClientLayout-DE-sKSWk.js";import{r as M,f as L,o as i,w as x,a as e,d as h,g as w,h as f,c as n,i as c,n as v,l as b,t as o,x as E}from"./app-zGlaTtug.js";import{c as u,m as g,a as p,e as V,r as C,u as P}from"./index-2ne3icbq.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const D={components:{ClientLayout:k},props:{client:{type:Object,required:!0},user:{type:Object,required:!0},errors:{type:Object,default:()=>({})}},setup(){const a=_();return{v$:P(),toast:a}},data(){return{processing:!1,form:{email:this.client.email||"",telephone:this.client.telephone||"",mobile:this.client.mobile||"",adresse:this.client.adresse||"",code_postal:this.client.code_postal||"",ville:this.client.ville||"",pays:this.client.pays||"France"}}},validations(){return{form:{email:{required:u.withMessage("L'email est requis",C),email:u.withMessage("Veuillez entrer un email valide",V),maxLength:u.withMessage("L'email ne peut pas dépasser 255 caractères",g(255))},telephone:{minLength:u.withMessage("Le téléphone doit contenir au moins 10 caractères",p(10)),maxLength:u.withMessage("Le téléphone ne peut pas dépasser 20 caractères",g(20))},mobile:{minLength:u.withMessage("Le mobile doit contenir au moins 10 caractères",p(10)),maxLength:u.withMessage("Le mobile ne peut pas dépasser 20 caractères",g(20))},adresse:{maxLength:u.withMessage("L'adresse ne peut pas dépasser 255 caractères",g(255))},code_postal:{minLength:u.withMessage("Le code postal doit contenir au moins 4 caractères",p(4)),maxLength:u.withMessage("Le code postal ne peut pas dépasser 10 caractères",g(10))},ville:{maxLength:u.withMessage("La ville ne peut pas dépasser 100 caractères",g(100))},pays:{maxLength:u.withMessage("Le pays ne peut pas dépasser 100 caractères",g(100))}}}},methods:{async updateProfile(){if(!await this.v$.$validate()){this.toast.validationError("Veuillez corriger les erreurs dans le formulaire");return}this.processing=!0,E.put(route("client.profil.update"),this.form,{onSuccess:()=>{this.processing=!1,this.v$.$reset(),this.toast.saveSuccess("Profil")},onError:s=>{this.processing=!1,this.toast.error("Une erreur est survenue lors de la mise à jour")}})},formatDate(a){return a?new Date(a).toLocaleDateString("fr-FR"):""},formatDateTime(a){if(!a)return"";const s=new Date(a);return`${s.toLocaleDateString("fr-FR")} ${s.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}`},getValidationClass(a){return this.v$.form[a].$dirty?this.v$.form[a].$error?"is-invalid":"is-valid":""},getErrorMessage(a){return!this.v$.form[a].$dirty||!this.v$.form[a].$error?"":this.v$.form[a].$errors[0].$message}}},N={class:"row"},S={class:"col-md-6 mb-4"},T={class:"card"},U={class:"card-body"},z={class:"mb-3"},q=["value"],A={class:"mb-3"},F={key:0,class:"invalid-feedback"},R={key:1,class:"invalid-feedback"},j={class:"row mb-3"},I={class:"col-md-6"},O={key:0,class:"invalid-feedback"},G={key:1,class:"invalid-feedback"},J={class:"col-md-6"},H={key:0,class:"invalid-feedback"},K={key:1,class:"invalid-feedback"},Q={class:"mb-3"},W={key:0,class:"invalid-feedback"},X={key:1,class:"invalid-feedback"},Y={class:"row mb-3"},Z={class:"col-md-4"},$={key:0,class:"invalid-feedback"},ee={key:1,class:"invalid-feedback"},se={class:"col-md-5"},te={key:0,class:"invalid-feedback"},le={key:1,class:"invalid-feedback"},re={class:"col-md-3"},oe={key:0,class:"invalid-feedback"},ie={key:1,class:"invalid-feedback"},ae={class:"d-grid"},ne=["disabled"],de={key:0},me={key:1},ue={class:"col-md-6 mb-4"},ce={class:"card"},fe={class:"card-body"},ve={class:"table table-borderless"},be=["href"],ge={key:0,class:"card mt-4"},he={class:"card-body"},pe={class:"table table-borderless"};function ye(a,s,r,m,d,l){const y=M("ClientLayout");return i(),L(y,{title:"Mon Profil"},{default:x(()=>[s[38]||(s[38]=e("div",{class:"mb-4"},[e("h1",{class:"h3"},"Mon Profil"),e("p",{class:"text-muted"},"Gérez vos informations personnelles")],-1)),e("div",N,[e("div",S,[e("div",T,[s[25]||(s[25]=e("div",{class:"card-header"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-user me-2"}),h("Informations Personnelles")])],-1)),e("div",U,[e("form",{onSubmit:s[14]||(s[14]=w((...t)=>l.updateProfile&&l.updateProfile(...t),["prevent"]))},[e("div",z,[s[15]||(s[15]=e("label",{class:"form-label"},"Nom Complet",-1)),e("input",{type:"text",class:"form-control",value:`${r.client.prenom} ${r.client.nom}`,readonly:""},null,8,q),s[16]||(s[16]=e("small",{class:"text-muted"},"Pour modifier votre nom, contactez notre service.",-1))]),e("div",A,[s[17]||(s[17]=e("label",{for:"email",class:"form-label"},"Email *",-1)),f(e("input",{type:"email","onUpdate:modelValue":s[0]||(s[0]=t=>d.form.email=t),onBlur:s[1]||(s[1]=(...t)=>m.v$.form.email.$touch&&m.v$.form.email.$touch(...t)),class:v(["form-control",l.getValidationClass("email")]),id:"email"},null,34),[[b,d.form.email]]),l.getErrorMessage("email")?(i(),n("div",F,o(l.getErrorMessage("email")),1)):r.errors.email?(i(),n("div",R,o(r.errors.email),1)):c("",!0)]),e("div",j,[e("div",I,[s[18]||(s[18]=e("label",{for:"telephone",class:"form-label"},"Téléphone",-1)),f(e("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=t=>d.form.telephone=t),onBlur:s[3]||(s[3]=(...t)=>m.v$.form.telephone.$touch&&m.v$.form.telephone.$touch(...t)),class:v(["form-control",l.getValidationClass("telephone")]),id:"telephone",placeholder:"Ex: 01 23 45 67 89"},null,34),[[b,d.form.telephone]]),l.getErrorMessage("telephone")?(i(),n("div",O,o(l.getErrorMessage("telephone")),1)):r.errors.telephone?(i(),n("div",G,o(r.errors.telephone),1)):c("",!0)]),e("div",J,[s[19]||(s[19]=e("label",{for:"mobile",class:"form-label"},"Mobile",-1)),f(e("input",{type:"text","onUpdate:modelValue":s[4]||(s[4]=t=>d.form.mobile=t),onBlur:s[5]||(s[5]=(...t)=>m.v$.form.mobile.$touch&&m.v$.form.mobile.$touch(...t)),class:v(["form-control",l.getValidationClass("mobile")]),id:"mobile",placeholder:"Ex: 06 12 34 56 78"},null,34),[[b,d.form.mobile]]),l.getErrorMessage("mobile")?(i(),n("div",H,o(l.getErrorMessage("mobile")),1)):r.errors.mobile?(i(),n("div",K,o(r.errors.mobile),1)):c("",!0)])]),e("div",Q,[s[20]||(s[20]=e("label",{for:"adresse",class:"form-label"},"Adresse",-1)),f(e("textarea",{"onUpdate:modelValue":s[6]||(s[6]=t=>d.form.adresse=t),onBlur:s[7]||(s[7]=(...t)=>m.v$.form.adresse.$touch&&m.v$.form.adresse.$touch(...t)),class:v(["form-control",l.getValidationClass("adresse")]),id:"adresse",rows:"2",placeholder:"Numéro et nom de rue"},null,34),[[b,d.form.adresse]]),l.getErrorMessage("adresse")?(i(),n("div",W,o(l.getErrorMessage("adresse")),1)):r.errors.adresse?(i(),n("div",X,o(r.errors.adresse),1)):c("",!0)]),e("div",Y,[e("div",Z,[s[21]||(s[21]=e("label",{for:"code_postal",class:"form-label"},"Code Postal",-1)),f(e("input",{type:"text","onUpdate:modelValue":s[8]||(s[8]=t=>d.form.code_postal=t),onBlur:s[9]||(s[9]=(...t)=>m.v$.form.code_postal.$touch&&m.v$.form.code_postal.$touch(...t)),class:v(["form-control",l.getValidationClass("code_postal")]),id:"code_postal",placeholder:"75001"},null,34),[[b,d.form.code_postal]]),l.getErrorMessage("code_postal")?(i(),n("div",$,o(l.getErrorMessage("code_postal")),1)):r.errors.code_postal?(i(),n("div",ee,o(r.errors.code_postal),1)):c("",!0)]),e("div",se,[s[22]||(s[22]=e("label",{for:"ville",class:"form-label"},"Ville",-1)),f(e("input",{type:"text","onUpdate:modelValue":s[10]||(s[10]=t=>d.form.ville=t),onBlur:s[11]||(s[11]=(...t)=>m.v$.form.ville.$touch&&m.v$.form.ville.$touch(...t)),class:v(["form-control",l.getValidationClass("ville")]),id:"ville",placeholder:"Paris"},null,34),[[b,d.form.ville]]),l.getErrorMessage("ville")?(i(),n("div",te,o(l.getErrorMessage("ville")),1)):r.errors.ville?(i(),n("div",le,o(r.errors.ville),1)):c("",!0)]),e("div",re,[s[23]||(s[23]=e("label",{for:"pays",class:"form-label"},"Pays",-1)),f(e("input",{type:"text","onUpdate:modelValue":s[12]||(s[12]=t=>d.form.pays=t),onBlur:s[13]||(s[13]=(...t)=>m.v$.form.pays.$touch&&m.v$.form.pays.$touch(...t)),class:v(["form-control",l.getValidationClass("pays")]),id:"pays",placeholder:"France"},null,34),[[b,d.form.pays]]),l.getErrorMessage("pays")?(i(),n("div",oe,o(l.getErrorMessage("pays")),1)):r.errors.pays?(i(),n("div",ie,o(r.errors.pays),1)):c("",!0)])]),e("div",ae,[e("button",{type:"submit",class:"btn btn-primary",disabled:d.processing},[s[24]||(s[24]=e("i",{class:"fas fa-save me-2"},null,-1)),d.processing?(i(),n("span",de,"Enregistrement...")):(i(),n("span",me,"Enregistrer les modifications"))],8,ne)])],32)])])]),e("div",ue,[e("div",ce,[s[32]||(s[32]=e("div",{class:"card-header"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-lock me-2"}),h("Compte Utilisateur")])],-1)),e("div",fe,[e("table",ve,[e("tbody",null,[e("tr",null,[s[26]||(s[26]=e("th",{width:"40%"},"Email de connexion:",-1)),e("td",null,o(r.user.email),1)]),e("tr",null,[s[27]||(s[27]=e("th",null,"Dernière connexion:",-1)),e("td",null,o(r.user.last_login_at?l.formatDateTime(r.user.last_login_at):"Jamais"),1)]),e("tr",null,[s[28]||(s[28]=e("th",null,"Compte créé le:",-1)),e("td",null,o(l.formatDate(r.user.created_at)),1)])])]),s[30]||(s[30]=e("hr",null,null,-1)),s[31]||(s[31]=e("div",{class:"alert alert-info"},[e("i",{class:"fas fa-info-circle me-2"}),e("strong",null,"Changement de mot de passe"),e("br"),h(" Pour modifier votre mot de passe, rendez-vous dans les paramètres de votre profil utilisateur. ")],-1)),e("a",{href:a.route("profile.edit"),class:"btn btn-outline-primary w-100"},[...s[29]||(s[29]=[e("i",{class:"fas fa-key me-2"},null,-1),h("Gérer mon mot de passe ",-1)])],8,be)])]),r.client.type_client==="entreprise"?(i(),n("div",ge,[s[37]||(s[37]=e("div",{class:"card-header"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-building me-2"}),h("Informations Entreprise")])],-1)),e("div",he,[e("table",pe,[e("tbody",null,[e("tr",null,[s[33]||(s[33]=e("th",{width:"40%"},"Raison Sociale:",-1)),e("td",null,o(r.client.raison_sociale||"N/A"),1)]),e("tr",null,[s[34]||(s[34]=e("th",null,"SIRET:",-1)),e("td",null,o(r.client.siret||"N/A"),1)]),e("tr",null,[s[35]||(s[35]=e("th",null,"N° TVA:",-1)),e("td",null,o(r.client.numero_tva||"N/A"),1)])])]),s[36]||(s[36]=e("small",{class:"text-muted"}," Pour modifier ces informations, contactez notre service commercial. ",-1))])])):c("",!0)])]),s[39]||(s[39]=e("div",{class:"card bg-light"},[e("div",{class:"card-body"},[e("h5",null,[e("i",{class:"fas fa-question-circle me-2"}),h("Besoin d'aide ?")]),e("p",{class:"mb-0"}," Pour toute question ou modification ne pouvant être effectuée directement, n'hésitez pas à contacter notre service client. ")])],-1))]),_:1})}const we=B(D,[["render",ye]]);export{we as default};
