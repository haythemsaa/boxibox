import{C as h}from"./ClientLayout-C9U263p5.js";import{_ as p,r as y,f as k,o,w,a as e,t as r,g as f,h as b,v as P,l as _,d as c,c as d,i as m,F as S,j as C,n as u,x as g}from"./app-CRj_m259.js";/* empty css            */const q={components:{ClientLayout:h},props:{reglements:{type:Object,required:!0},stats:{type:Object,required:!0},queryParams:{type:Object,default:()=>({})}},data(){return{filters:{mode_paiement:this.queryParams.mode_paiement||"",date_debut:this.queryParams.date_debut||"",date_fin:this.queryParams.date_fin||""}}},methods:{applyFilters(){g.get(route("client.reglements"),this.filters,{preserveState:!0,preserveScroll:!0})},changePage(s){s<1||s>this.reglements.last_page||g.get(route("client.reglements"),{...this.filters,page:s},{preserveState:!0,preserveScroll:!0})},formatDate(s){return s?new Date(s).toLocaleDateString("fr-FR"):""},timeAgo(s){if(!s)return"";const t=new Date(s),v=Math.abs(new Date-t),i=Math.ceil(v/(1e3*60*60*24));if(i<7)return`Il y a ${i} jour${i>1?"s":""}`;if(i<30){const l=Math.floor(i/7);return`Il y a ${l} semaine${l>1?"s":""}`}else{if(i<365)return`Il y a ${Math.floor(i/30)} mois`;{const l=Math.floor(i/365);return`Il y a ${l} an${l>1?"s":""}`}}},formatAmount(s){return s?parseFloat(s).toFixed(2):"0.00"},getPaymentIcon(s){return{virement:"fas fa-exchange-alt text-primary",cheque:"fas fa-money-check text-success",especes:"fas fa-money-bill-wave text-warning",carte:"fas fa-credit-card text-info",prelevement:"fas fa-university text-secondary"}[s]||"fas fa-question"},getPaymentLabel(s){return{virement:"Virement",cheque:"Chèque",especes:"Espèces",carte:"Carte Bancaire",prelevement:"Prélèvement SEPA"}[s]||s.charAt(0).toUpperCase()+s.slice(1)},getStatusBadge(s){return{valide:"badge bg-success",en_attente:"badge bg-warning",refuse:"badge bg-danger"}[s]||"badge bg-secondary"},getStatusIcon(s){return{valide:"fas fa-check-circle",en_attente:"fas fa-clock",refuse:"fas fa-times-circle"}[s]||"fas fa-question"},getStatusLabel(s){return{valide:"Validé",en_attente:"En attente",refuse:"Refusé"}[s]||s.charAt(0).toUpperCase()+s.slice(1)},truncate(s,t){return s?s.length>t?s.substring(0,t)+"...":s:""}}},M={class:"row mb-4"},A={class:"col-md-3 mb-3"},D={class:"card border-start border-success border-4"},V={class:"card-body"},F={class:"d-flex align-items-center"},R={class:"flex-grow-1 ms-3"},I={class:"h4 mb-0"},L={class:"col-md-3 mb-3"},B={class:"card border-start border-primary border-4"},E={class:"card-body"},T={class:"d-flex align-items-center"},j={class:"flex-grow-1 ms-3"},N={class:"h4 mb-0"},U={class:"col-md-3 mb-3"},O={class:"card border-start border-info border-4"},z={class:"card-body"},H={class:"d-flex align-items-center"},G={class:"flex-grow-1 ms-3"},J={class:"h4 mb-0"},K={class:"col-md-3 mb-3"},Q={class:"card border-start border-warning border-4"},W={class:"card-body"},X={class:"d-flex align-items-center"},Y={class:"flex-grow-1 ms-3"},Z={class:"h4 mb-0"},$={class:"card mb-4"},ee={class:"card-body"},te={class:"col-md-3"},se={class:"col-md-3"},ae={class:"col-md-3"},le={class:"card"},ne={class:"card-body p-0"},re={class:"table-responsive"},ie={class:"table table-hover align-middle mb-0"},oe={class:"text-muted"},de=["href"],ce={key:1,class:"text-muted"},me={key:2},ue={key:3,class:"text-muted"},fe={key:0,class:"text-dark"},be={key:1,class:"text-muted"},ve={key:2},_e={key:3,class:"text-muted"},ge={class:"text-end"},xe={class:"text-success"},he={key:0},pe={key:0,class:"card-footer bg-white"},ye={class:"d-flex justify-content-between align-items-center"},ke={class:"text-muted small"},we={class:"pagination pagination-sm mb-0"},Pe={class:"alert alert-info mt-4"},Se={class:"mb-0 small mt-2"},Ce=["href"];function qe(s,t,n,v,i,l){const x=y("ClientLayout");return o(),k(x,{title:"Mes Règlements"},{default:w(()=>[t[29]||(t[29]=e("div",{class:"mb-4"},[e("h1",{class:"h3"},"Mes Règlements"),e("p",{class:"text-muted"},"Historique de vos paiements")],-1)),e("div",M,[e("div",A,[e("div",D,[e("div",V,[e("div",F,[t[7]||(t[7]=e("div",{class:"flex-shrink-0"},[e("i",{class:"fas fa-receipt fa-2x text-success"})],-1)),e("div",R,[t[6]||(t[6]=e("div",{class:"text-muted small"},"Total Règlements",-1)),e("div",I,r(n.stats.total_reglements),1)])])])])]),e("div",L,[e("div",B,[e("div",E,[e("div",T,[t[9]||(t[9]=e("div",{class:"flex-shrink-0"},[e("i",{class:"fas fa-euro-sign fa-2x text-primary"})],-1)),e("div",j,[t[8]||(t[8]=e("div",{class:"text-muted small"},"Montant Total",-1)),e("div",N,r(l.formatAmount(n.stats.montant_total))+" €",1)])])])])]),e("div",U,[e("div",O,[e("div",z,[e("div",H,[t[11]||(t[11]=e("div",{class:"flex-shrink-0"},[e("i",{class:"fas fa-calendar-month fa-2x text-info"})],-1)),e("div",G,[t[10]||(t[10]=e("div",{class:"text-muted small"},"Ce Mois",-1)),e("div",J,r(n.stats.reglements_mois||0),1)])])])])]),e("div",K,[e("div",Q,[e("div",W,[e("div",X,[t[13]||(t[13]=e("div",{class:"flex-shrink-0"},[e("i",{class:"fas fa-chart-line fa-2x text-warning"})],-1)),e("div",Y,[t[12]||(t[12]=e("div",{class:"text-muted small"},"Moyenne",-1)),e("div",Z,r(l.formatAmount(n.stats.montant_moyen||0))+" €",1)])])])])])]),e("div",$,[e("div",ee,[e("form",{onSubmit:t[3]||(t[3]=f((...a)=>l.applyFilters&&l.applyFilters(...a),["prevent"])),class:"row g-3"},[e("div",te,[t[15]||(t[15]=e("label",{class:"form-label small text-muted"},"Mode de paiement",-1)),b(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>i.filters.mode_paiement=a),class:"form-select"},[...t[14]||(t[14]=[e("option",{value:""},"Tous les modes",-1),e("option",{value:"virement"},"Virement",-1),e("option",{value:"cheque"},"Chèque",-1),e("option",{value:"carte"},"Carte Bancaire",-1),e("option",{value:"prelevement"},"Prélèvement SEPA",-1),e("option",{value:"especes"},"Espèces",-1)])],512),[[P,i.filters.mode_paiement]])]),e("div",se,[t[16]||(t[16]=e("label",{class:"form-label small text-muted"},"Date de début",-1)),b(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=a=>i.filters.date_debut=a),class:"form-control"},null,512),[[_,i.filters.date_debut]])]),e("div",ae,[t[17]||(t[17]=e("label",{class:"form-label small text-muted"},"Date de fin",-1)),b(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=a=>i.filters.date_fin=a),class:"form-control"},null,512),[[_,i.filters.date_fin]])]),t[18]||(t[18]=e("div",{class:"col-md-3 d-flex align-items-end"},[e("button",{type:"submit",class:"btn btn-primary w-100"},[e("i",{class:"fas fa-filter me-1"}),c("Filtrer ")])],-1))],32)])]),e("div",le,[t[23]||(t[23]=e("div",{class:"card-header bg-white"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-list me-2"}),c("Historique des Règlements")])],-1)),e("div",ne,[e("div",re,[e("table",ie,[t[22]||(t[22]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Date Règlement"),e("th",null,"Facture Concernée"),e("th",null,"Mode de Paiement"),e("th",null,"Référence/N° Transaction"),e("th",{class:"text-end"},"Montant Payé"),e("th",null,"Statut"),e("th",null,"Actions")])],-1)),e("tbody",null,[(o(!0),d(S,null,C(n.reglements.data,a=>(o(),d("tr",{key:a.id},[e("td",null,[e("strong",null,r(l.formatDate(a.date_reglement)),1),t[19]||(t[19]=e("br",null,null,-1)),e("small",oe,r(l.timeAgo(a.date_reglement)),1)]),e("td",null,[a.facture?(o(),d("a",{key:0,href:s.route("client.factures.show",a.facture.id),class:"text-decoration-none"},r(a.facture.numero_facture),9,de)):(o(),d("span",ce,"N/A")),a.facture?(o(),d("br",me)):m("",!0),a.facture?(o(),d("small",ue,r(l.formatDate(a.facture.date_emission)),1)):m("",!0)]),e("td",null,[e("i",{class:u([l.getPaymentIcon(a.mode_paiement),"me-1"])},null,2),e("span",null,r(l.getPaymentLabel(a.mode_paiement)),1)]),e("td",null,[a.reference?(o(),d("code",fe,r(a.reference),1)):(o(),d("span",be,"-")),a.notes?(o(),d("br",ve)):m("",!0),a.notes?(o(),d("small",_e,r(l.truncate(a.notes,30)),1)):m("",!0)]),e("td",ge,[e("strong",xe,r(l.formatAmount(a.montant))+" €",1)]),e("td",null,[e("span",{class:u(l.getStatusBadge(a.statut))},[e("i",{class:u([l.getStatusIcon(a.statut),"me-1"])},null,2),c(" "+r(l.getStatusLabel(a.statut)),1)],2)]),t[20]||(t[20]=e("td",null,[e("a",{href:"#",class:"btn btn-sm btn-outline-primary",title:"Reçu"},[e("i",{class:"fas fa-file-invoice"})])],-1))]))),128)),!n.reglements.data||n.reglements.data.length===0?(o(),d("tr",he,[...t[21]||(t[21]=[e("td",{colspan:"7",class:"text-center py-5"},[e("i",{class:"fas fa-receipt fa-3x text-muted mb-3 d-block"}),e("p",{class:"text-muted mb-1"},"Aucun règlement trouvé"),e("small",{class:"text-muted"},"Vos paiements apparaîtront ici")],-1)])])):m("",!0)])])])]),n.reglements.last_page>1?(o(),d("div",pe,[e("div",ye,[e("div",ke," Affichage de "+r(n.reglements.from)+" à "+r(n.reglements.to)+" sur "+r(n.reglements.total)+" règlements ",1),e("nav",null,[e("ul",we,[e("li",{class:u(["page-item",{disabled:!n.reglements.prev_page_url}])},[e("a",{class:"page-link",onClick:t[4]||(t[4]=f(a=>l.changePage(n.reglements.current_page-1),["prevent"]))}," Précédent ")],2),e("li",{class:u(["page-item",{disabled:!n.reglements.next_page_url}])},[e("a",{class:"page-link",onClick:t[5]||(t[5]=f(a=>l.changePage(n.reglements.current_page+1),["prevent"]))}," Suivant ")],2)])])])])):m("",!0)]),e("div",Pe,[t[26]||(t[26]=e("h6",{class:"alert-heading"},[e("i",{class:"fas fa-info-circle me-2"}),c("Modes de paiement acceptés")],-1)),t[27]||(t[27]=e("p",{class:"mb-2 small"}," Nous acceptons les modes de paiement suivants : ",-1)),t[28]||(t[28]=e("div",{class:"row small"},[e("div",{class:"col-md-4 mb-1"},[e("i",{class:"fas fa-university text-primary me-1"}),c(" Prélèvement automatique SEPA ")]),e("div",{class:"col-md-4 mb-1"},[e("i",{class:"fas fa-credit-card text-info me-1"}),c(" Carte bancaire ")]),e("div",{class:"col-md-4 mb-1"},[e("i",{class:"fas fa-exchange-alt text-success me-1"}),c(" Virement bancaire ")])],-1)),e("p",Se,[t[24]||(t[24]=c(" Pour activer le prélèvement automatique, ",-1)),e("a",{href:s.route("client.sepa"),class:"alert-link"},"créez un mandat SEPA",8,Ce),t[25]||(t[25]=c(". ",-1))])])]),_:1})}const Ve=p(q,[["render",qe],["__scopeId","data-v-dc2d6047"]]);export{Ve as default};
