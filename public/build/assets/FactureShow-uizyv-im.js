import{C as b}from"./ClientLayout-Dkl03K-0.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as g,f as y,o,w as v,a as t,c as d,i as c,d as u,t as n,n as i,F as m,j as f}from"./app-BhQbKMjd.js";/* empty css            */const x={components:{ClientLayout:b},props:{facture:{type:Object,required:!0}},computed:{montantRegle(){return this.facture.reglements?this.facture.reglements.reduce((a,e)=>a+parseFloat(e.montant||0),0):0},resteAPayer(){return parseFloat(this.facture.montant_ttc||0)-this.montantRegle}},methods:{formatDate(a){return a?new Date(a).toLocaleDateString("fr-FR"):""},formatAmount(a){return a?parseFloat(a).toFixed(2):"0.00"},getStatusBadgeClass(a){return{payee:"badge bg-success",paye:"badge bg-success",impayee:"badge bg-danger",impaye:"badge bg-danger",en_attente:"badge bg-warning",en_retard:"badge bg-danger"}[a]||"badge bg-secondary"},getStatusLabel(a){return{payee:"Payée",paye:"Payée",impayee:"Impayée",impaye:"Impayée",en_attente:"En attente",en_retard:"En retard"}[a]||a.charAt(0).toUpperCase()+a.slice(1)},getPaymentIcon(a){return{virement:"fas fa-exchange-alt",cheque:"fas fa-money-check",especes:"fas fa-money-bill-wave",carte:"fas fa-credit-card",prelevement:"fas fa-university"}[a]||"fas fa-money-bill"},getPaymentLabel(a){return{virement:"Virement",cheque:"Chèque",especes:"Espèces",carte:"Carte",prelevement:"Prélèvement"}[a]||a.charAt(0).toUpperCase()+a.slice(1)}}},A={class:"mb-4"},C=["href"],w={class:"d-flex justify-content-between align-items-center"},D={class:"h3"},k=["href"],F={class:"row"},P={class:"col-md-6 mb-4"},R={class:"card"},L={class:"card-body"},T={class:"table table-borderless"},S=["href"],B={key:1},I={class:"col-md-6 mb-4"},M={class:"card"},N={class:"card-body"},q={class:"table table-borderless"},V={class:"table-active"},E={class:"text-primary fs-5"},j={key:0},H={class:"text-success"},U={key:1},z={class:"text-danger"},O={class:"card mb-4"},Q={class:"card-body"},G={class:"table-responsive"},J={class:"table"},K={class:"text-center"},W={class:"text-end"},X={class:"text-end"},Y={key:0},Z={key:0,class:"card"},p={class:"card-body"},$={class:"table-responsive"},tt={class:"table"},et={class:"text-end"};function at(a,e,s,st,nt,l){const _=g("ClientLayout");return o(),y(_,{title:"Facture "+s.facture.numero_facture},{default:v(()=>[t("div",A,[t("a",{href:a.route("client.factures"),class:"btn btn-sm btn-secondary mb-2"},[...e[0]||(e[0]=[t("i",{class:"fas fa-arrow-left me-2"},null,-1),u("Retour ",-1)])],8,C),t("div",w,[t("h1",D,"Facture "+n(s.facture.numero_facture),1),t("a",{href:a.route("client.factures.pdf",s.facture.id),class:"btn btn-primary"},[...e[1]||(e[1]=[t("i",{class:"fas fa-download me-2"},null,-1),u("Télécharger PDF ",-1)])],8,k)])]),t("div",F,[t("div",P,[t("div",R,[e[7]||(e[7]=t("div",{class:"card-header"},[t("h5",{class:"mb-0"},[t("i",{class:"fas fa-file-invoice me-2"}),u("Informations")])],-1)),t("div",L,[t("table",T,[t("tbody",null,[t("tr",null,[e[2]||(e[2]=t("th",{width:"40%"},"Numéro:",-1)),t("td",null,[t("strong",null,n(s.facture.numero_facture),1)])]),t("tr",null,[e[3]||(e[3]=t("th",null,"Date Émission:",-1)),t("td",null,n(l.formatDate(s.facture.date_emission)),1)]),t("tr",null,[e[4]||(e[4]=t("th",null,"Date Échéance:",-1)),t("td",null,n(l.formatDate(s.facture.date_echeance)),1)]),t("tr",null,[e[5]||(e[5]=t("th",null,"Contrat:",-1)),t("td",null,[s.facture.contrat?(o(),d("a",{key:0,href:a.route("client.contrats.show",s.facture.contrat.id)},n(s.facture.contrat.numero_contrat),9,S)):(o(),d("span",B,"N/A"))])]),t("tr",null,[e[6]||(e[6]=t("th",null,"Statut:",-1)),t("td",null,[t("span",{class:i(l.getStatusBadgeClass(s.facture.statut))},n(l.getStatusLabel(s.facture.statut)),3)])])])])])])]),t("div",I,[t("div",M,[e[12]||(e[12]=t("div",{class:"card-header"},[t("h5",{class:"mb-0"},[t("i",{class:"fas fa-euro-sign me-2"}),u("Montants")])],-1)),t("div",N,[t("table",q,[t("tbody",null,[t("tr",null,[e[8]||(e[8]=t("th",{width:"40%"},"Montant HT:",-1)),t("td",null,n(l.formatAmount(s.facture.montant_ht))+" €",1)]),t("tr",null,[t("th",null,"TVA ("+n(s.facture.taux_tva||20)+"%):",1),t("td",null,n(l.formatAmount(s.facture.montant_tva))+" €",1)]),t("tr",V,[e[9]||(e[9]=t("th",null,[t("strong",null,"Montant TTC:")],-1)),t("td",null,[t("strong",E,n(l.formatAmount(s.facture.montant_ttc))+" €",1)])]),l.montantRegle>0?(o(),d("tr",j,[e[10]||(e[10]=t("th",null,"Montant Réglé:",-1)),t("td",H,n(l.formatAmount(l.montantRegle))+" €",1)])):c("",!0),l.montantRegle>0?(o(),d("tr",U,[e[11]||(e[11]=t("th",null,"Reste à Payer:",-1)),t("td",z,[t("strong",null,n(l.formatAmount(l.resteAPayer))+" €",1)])])):c("",!0)])])])])])]),t("div",O,[e[15]||(e[15]=t("div",{class:"card-header"},[t("h5",{class:"mb-0"},[t("i",{class:"fas fa-list me-2"}),u("Détail de la Facture")])],-1)),t("div",Q,[t("div",G,[t("table",J,[e[14]||(e[14]=t("thead",null,[t("tr",null,[t("th",null,"Désignation"),t("th",{class:"text-center"},"Quantité"),t("th",{class:"text-end"},"Prix Unitaire HT"),t("th",{class:"text-end"},"Total HT")])],-1)),t("tbody",null,[(o(!0),d(m,null,f(s.facture.lignes,r=>(o(),d("tr",{key:r.id},[t("td",null,n(r.designation),1),t("td",K,n(r.quantite),1),t("td",W,n(l.formatAmount(r.prix_unitaire_ht))+" €",1),t("td",X,[t("strong",null,n(l.formatAmount(r.montant_total_ht))+" €",1)])]))),128)),!s.facture.lignes||s.facture.lignes.length===0?(o(),d("tr",Y,[...e[13]||(e[13]=[t("td",{colspan:"4",class:"text-center text-muted"},"Aucune ligne de facture",-1)])])):c("",!0)])])])])]),s.facture.reglements&&s.facture.reglements.length>0?(o(),d("div",Z,[e[17]||(e[17]=t("div",{class:"card-header"},[t("h5",{class:"mb-0"},[t("i",{class:"fas fa-money-bill me-2"}),u("Règlements")])],-1)),t("div",p,[t("div",$,[t("table",tt,[e[16]||(e[16]=t("thead",null,[t("tr",null,[t("th",null,"Date"),t("th",null,"Mode"),t("th",null,"Référence"),t("th",{class:"text-end"},"Montant")])],-1)),t("tbody",null,[(o(!0),d(m,null,f(s.facture.reglements,r=>(o(),d("tr",{key:r.id},[t("td",null,n(l.formatDate(r.date_reglement)),1),t("td",null,[t("i",{class:i([l.getPaymentIcon(r.mode_paiement),"me-1"])},null,2),u(" "+n(l.getPaymentLabel(r.mode_paiement)),1)]),t("td",null,n(r.reference||"N/A"),1),t("td",et,[t("strong",null,n(l.formatAmount(r.montant))+" €",1)])]))),128))])])])])])):c("",!0)]),_:1},8,["title"])}const ut=h(x,[["render",at],["__scopeId","data-v-9c18be88"]]);export{ut as default};
