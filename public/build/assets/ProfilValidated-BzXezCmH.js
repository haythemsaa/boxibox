import{c as n,o as i,i as b,a as l,d as v,t as d,n as p,_ as S,s as E,u as P,f as q,w as C,g as F,e as y,J as s,h as N,l as L,x as T}from"./app-DscnimDf.js";import{c as m,m as g,e as D,r as U,u as z}from"./index-CfoS2IZD.js";import{C as I}from"./ClientLayout-D-Q1RRq6.js";/* empty css            */const A={class:"mb-3"},R=["for"],j={key:0,class:"text-danger"},O=["id","type","value","placeholder","required","disabled","readonly","maxlength"],G={key:1,class:"invalid-feedback"},J={key:2,class:"invalid-feedback"},H={key:3,class:"form-text text-muted"},h={__name:"FormInput",props:{id:{type:String,required:!0},label:{type:String,default:""},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},maxlength:{type:[String,Number],default:null},error:{type:String,default:""},externalError:{type:String,default:""},helpText:{type:String,default:""},touched:{type:Boolean,default:!1}},emits:["update:modelValue","blur"],setup(t){return(c,f)=>(i(),n("div",A,[t.label?(i(),n("label",{key:0,for:t.id,class:"form-label"},[v(d(t.label)+" ",1),t.required?(i(),n("span",j,"*")):b("",!0)],8,R)):b("",!0),l("input",{id:t.id,type:t.type,value:t.modelValue,onInput:f[0]||(f[0]=o=>c.$emit("update:modelValue",o.target.value)),onBlur:f[1]||(f[1]=o=>c.$emit("blur")),class:p(["form-control",{"is-invalid":t.error||t.externalError,"is-valid":!t.error&&!t.externalError&&t.touched&&t.modelValue}]),placeholder:t.placeholder,required:t.required,disabled:t.disabled,readonly:t.readonly,maxlength:t.maxlength},null,42,O),t.error?(i(),n("div",G,d(t.error),1)):t.externalError?(i(),n("div",J,d(t.externalError),1)):b("",!0),t.helpText&&!t.error&&!t.externalError?(i(),n("small",H,d(t.helpText),1)):b("",!0)]))}},K={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},Q={class:"row"},W={class:"col-md-6 mb-4"},X={class:"card"},Y={class:"card-body"},Z={class:"mb-3"},_=["value"],ee={class:"row mb-3"},le={class:"col-md-6"},te={class:"col-md-6"},re={class:"mb-3"},se={key:0,class:"invalid-feedback"},oe={key:1,class:"invalid-feedback"},ae={class:"row mb-3"},ie={class:"col-md-4"},de={class:"col-md-5"},ne={class:"col-md-3"},ue={key:0,class:"alert alert-warning mb-3"},me={class:"d-grid"},ce=["disabled"],fe={key:0},ve={key:1},be={class:"col-md-6 mb-4"},ye={class:"card"},he={class:"card-body"},ge={class:"table table-borderless"},$e=["href"],xe={key:0,class:"card mt-4"},pe={class:"card-body"},Ve={class:"table table-borderless"},we={__name:"ProfilValidated",props:{client:{type:Object,required:!0},user:{type:Object,required:!0},errors:{type:Object,default:()=>({})}},setup(t){const c=t,f=ref(!1),o=E({email:c.client.email||"",telephone:c.client.telephone||"",mobile:c.client.mobile||"",adresse:c.client.adresse||"",code_postal:c.client.code_postal||"",ville:c.client.ville||"",pays:c.client.pays||"France"}),$=m.regex(/^(?:(?:\+|00)33[\s.-]{0,3}(?:\(0\)[\s.-]{0,3})?|0)[1-9](?:(?:[\s.-]?\d{2}){4}|\d{2}(?:[\s.-]?\d{3}){2})$/),V=m.regex(/^[0-9]{5}$/),w=P(()=>({email:{required:m.withMessage("L'email est obligatoire",U),email:m.withMessage("Email invalide",D),maxLength:m.withMessage("Maximum 255 caractères",g(255))},telephone:{frenchPhone:m.withMessage("Format de téléphone invalide (ex: 01 23 45 67 89)",$)},mobile:{frenchPhone:m.withMessage("Format de mobile invalide (ex: 06 12 34 56 78)",$)},adresse:{maxLength:m.withMessage("Maximum 500 caractères",g(500))},code_postal:{postalCode:m.withMessage("Code postal invalide (5 chiffres)",V)},ville:{maxLength:m.withMessage("Maximum 255 caractères",g(255))},pays:{maxLength:m.withMessage("Maximum 255 caractères",g(255))}})),r=z(w,o),k=async()=>{await r.value.$validate()&&(f.value=!0,T.put(x("client.profil.update"),o,{onSuccess:()=>{f.value=!1,r.value.$reset()},onError:()=>{f.value=!1}}))},M=u=>u?new Date(u).toLocaleDateString("fr-FR"):"",B=u=>{if(!u)return"";const e=new Date(u);return`${e.toLocaleDateString("fr-FR")} ${e.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}`},x=(u,e)=>window.route?window.route(u,e):"#";return(u,e)=>(i(),q(I,{title:"Mon Profil"},{default:C(()=>[e[34]||(e[34]=l("div",{class:"mb-4"},[l("h1",{class:"h3"},"Mon Profil"),l("p",{class:"text-muted"},"Gérez vos informations personnelles")],-1)),u.$page.props.flash?.success?(i(),n("div",K,[e[14]||(e[14]=l("i",{class:"fas fa-check-circle me-2"},null,-1)),v(d(u.$page.props.flash.success)+" ",1),e[15]||(e[15]=l("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert"},null,-1))])):b("",!0),l("div",Q,[l("div",W,[l("div",X,[e[21]||(e[21]=l("div",{class:"card-header"},[l("h5",{class:"mb-0"},[l("i",{class:"fas fa-user me-2"}),v("Informations Personnelles")])],-1)),l("div",Y,[l("form",{onSubmit:F(k,["prevent"])},[l("div",Z,[e[16]||(e[16]=l("label",{class:"form-label"},"Nom Complet",-1)),l("input",{type:"text",class:"form-control",value:`${t.client.prenom} ${t.client.nom}`,readonly:""},null,8,_),e[17]||(e[17]=l("small",{class:"text-muted"},"Pour modifier votre nom, contactez notre service.",-1))]),y(h,{id:"email",modelValue:o.email,"onUpdate:modelValue":e[0]||(e[0]=a=>o.email=a),type:"email",label:"Email",placeholder:"votre@email.com",required:!0,error:s(r).email.$errors[0]?.$message,"external-error":t.errors.email,touched:s(r).email.$dirty,onBlur:e[1]||(e[1]=a=>s(r).email.$touch()),"help-text":"Votre adresse email principale de contact"},null,8,["modelValue","error","external-error","touched"]),l("div",ee,[l("div",le,[y(h,{id:"telephone",modelValue:o.telephone,"onUpdate:modelValue":e[2]||(e[2]=a=>o.telephone=a),type:"tel",label:"Téléphone",placeholder:"01 23 45 67 89",error:s(r).telephone.$errors[0]?.$message,"external-error":t.errors.telephone,touched:s(r).telephone.$dirty,onBlur:e[3]||(e[3]=a=>s(r).telephone.$touch())},null,8,["modelValue","error","external-error","touched"])]),l("div",te,[y(h,{id:"mobile",modelValue:o.mobile,"onUpdate:modelValue":e[4]||(e[4]=a=>o.mobile=a),type:"tel",label:"Mobile",placeholder:"06 12 34 56 78",error:s(r).mobile.$errors[0]?.$message,"external-error":t.errors.mobile,touched:s(r).mobile.$dirty,onBlur:e[5]||(e[5]=a=>s(r).mobile.$touch())},null,8,["modelValue","error","external-error","touched"])])]),l("div",re,[e[18]||(e[18]=l("label",{for:"adresse",class:"form-label"},"Adresse",-1)),N(l("textarea",{id:"adresse","onUpdate:modelValue":e[6]||(e[6]=a=>o.adresse=a),class:p(["form-control",{"is-invalid":s(r).adresse.$errors.length||t.errors.adresse,"is-valid":!s(r).adresse.$errors.length&&s(r).adresse.$dirty&&o.adresse}]),rows:"2",onBlur:e[7]||(e[7]=a=>s(r).adresse.$touch())},null,34),[[L,o.adresse]]),s(r).adresse.$errors[0]?(i(),n("div",se,d(s(r).adresse.$errors[0].$message),1)):t.errors.adresse?(i(),n("div",oe,d(t.errors.adresse),1)):b("",!0)]),l("div",ae,[l("div",ie,[y(h,{id:"code_postal",modelValue:o.code_postal,"onUpdate:modelValue":e[8]||(e[8]=a=>o.code_postal=a),type:"text",label:"Code Postal",placeholder:"75001",maxlength:"10",error:s(r).code_postal.$errors[0]?.$message,"external-error":t.errors.code_postal,touched:s(r).code_postal.$dirty,onBlur:e[9]||(e[9]=a=>s(r).code_postal.$touch())},null,8,["modelValue","error","external-error","touched"])]),l("div",de,[y(h,{id:"ville",modelValue:o.ville,"onUpdate:modelValue":e[10]||(e[10]=a=>o.ville=a),type:"text",label:"Ville",placeholder:"Paris",error:s(r).ville.$errors[0]?.$message,"external-error":t.errors.ville,touched:s(r).ville.$dirty,onBlur:e[11]||(e[11]=a=>s(r).ville.$touch())},null,8,["modelValue","error","external-error","touched"])]),l("div",ne,[y(h,{id:"pays",modelValue:o.pays,"onUpdate:modelValue":e[12]||(e[12]=a=>o.pays=a),type:"text",label:"Pays",placeholder:"France",error:s(r).pays.$errors[0]?.$message,"external-error":t.errors.pays,touched:s(r).pays.$dirty,onBlur:e[13]||(e[13]=a=>s(r).pays.$touch())},null,8,["modelValue","error","external-error","touched"])])]),s(r).$errors.length>0?(i(),n("div",ue,[...e[19]||(e[19]=[l("i",{class:"fas fa-exclamation-triangle me-2"},null,-1),v(" Veuillez corriger les erreurs avant de soumettre le formulaire. ",-1)])])):b("",!0),l("div",me,[l("button",{type:"submit",class:"btn btn-primary",disabled:s(f)||s(r).$invalid},[e[20]||(e[20]=l("i",{class:"fas fa-save me-2"},null,-1)),s(f)?(i(),n("span",fe,"Enregistrement...")):(i(),n("span",ve,"Enregistrer les modifications"))],8,ce)])],32)])])]),l("div",be,[l("div",ye,[e[28]||(e[28]=l("div",{class:"card-header"},[l("h5",{class:"mb-0"},[l("i",{class:"fas fa-lock me-2"}),v("Compte Utilisateur")])],-1)),l("div",he,[l("table",ge,[l("tbody",null,[l("tr",null,[e[22]||(e[22]=l("th",{width:"40%"},"Email de connexion:",-1)),l("td",null,d(t.user.email),1)]),l("tr",null,[e[23]||(e[23]=l("th",null,"Dernière connexion:",-1)),l("td",null,d(t.user.last_login_at?B(t.user.last_login_at):"Jamais"),1)]),l("tr",null,[e[24]||(e[24]=l("th",null,"Compte créé le:",-1)),l("td",null,d(M(t.user.created_at)),1)])])]),e[26]||(e[26]=l("hr",null,null,-1)),e[27]||(e[27]=l("div",{class:"alert alert-info"},[l("i",{class:"fas fa-info-circle me-2"}),l("strong",null,"Changement de mot de passe"),l("br"),v(" Pour modifier votre mot de passe, rendez-vous dans les paramètres de votre profil utilisateur. ")],-1)),l("a",{href:x("profile.edit"),class:"btn btn-outline-primary w-100"},[...e[25]||(e[25]=[l("i",{class:"fas fa-key me-2"},null,-1),v("Gérer mon mot de passe ",-1)])],8,$e)])]),t.client.type_client==="entreprise"?(i(),n("div",xe,[e[33]||(e[33]=l("div",{class:"card-header"},[l("h5",{class:"mb-0"},[l("i",{class:"fas fa-building me-2"}),v("Informations Entreprise")])],-1)),l("div",pe,[l("table",Ve,[l("tbody",null,[l("tr",null,[e[29]||(e[29]=l("th",{width:"40%"},"Raison Sociale:",-1)),l("td",null,d(t.client.raison_sociale||"N/A"),1)]),l("tr",null,[e[30]||(e[30]=l("th",null,"SIRET:",-1)),l("td",null,d(t.client.siret||"N/A"),1)]),l("tr",null,[e[31]||(e[31]=l("th",null,"N° TVA:",-1)),l("td",null,d(t.client.numero_tva||"N/A"),1)])])]),e[32]||(e[32]=l("small",{class:"text-muted"}," Pour modifier ces informations, contactez notre service commercial. ",-1))])])):b("",!0)])]),e[35]||(e[35]=l("div",{class:"card bg-light"},[l("div",{class:"card-body"},[l("h5",null,[l("i",{class:"fas fa-question-circle me-2"}),v("Besoin d'aide ?")]),l("p",{class:"mb-0"}," Pour toute question ou modification ne pouvant être effectuée directement, n'hésitez pas à contacter notre service client. ")])],-1))]),_:1}))}},Ee=S(we,[["__scopeId","data-v-893f367a"]]);export{Ee as default};
