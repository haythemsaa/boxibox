import{C as k}from"./ClientLayout-D-Q1RRq6.js";import{_,r as M,f as L,o as i,w as x,a as e,d as h,g as w,h as f,c as a,i as c,n as v,l as b,t as o,x as E}from"./app-DscnimDf.js";import{c as u,m as g,a as p,e as V,r as C,u as P}from"./index-CfoS2IZD.js";/* empty css            */const B={components:{ClientLayout:k},props:{client:{type:Object,required:!0},user:{type:Object,required:!0},errors:{type:Object,default:()=>({})}},setup(){return{v$:P()}},data(){return{processing:!1,form:{email:this.client.email||"",telephone:this.client.telephone||"",mobile:this.client.mobile||"",adresse:this.client.adresse||"",code_postal:this.client.code_postal||"",ville:this.client.ville||"",pays:this.client.pays||"France"}}},validations(){return{form:{email:{required:u.withMessage("L'email est requis",C),email:u.withMessage("Veuillez entrer un email valide",V),maxLength:u.withMessage("L'email ne peut pas dépasser 255 caractères",g(255))},telephone:{minLength:u.withMessage("Le téléphone doit contenir au moins 10 caractères",p(10)),maxLength:u.withMessage("Le téléphone ne peut pas dépasser 20 caractères",g(20))},mobile:{minLength:u.withMessage("Le mobile doit contenir au moins 10 caractères",p(10)),maxLength:u.withMessage("Le mobile ne peut pas dépasser 20 caractères",g(20))},adresse:{maxLength:u.withMessage("L'adresse ne peut pas dépasser 255 caractères",g(255))},code_postal:{minLength:u.withMessage("Le code postal doit contenir au moins 4 caractères",p(4)),maxLength:u.withMessage("Le code postal ne peut pas dépasser 10 caractères",g(10))},ville:{maxLength:u.withMessage("La ville ne peut pas dépasser 100 caractères",g(100))},pays:{maxLength:u.withMessage("Le pays ne peut pas dépasser 100 caractères",g(100))}}}},methods:{async updateProfile(){if(!await this.v$.$validate()){this.$toast.warning("Veuillez corriger les erreurs dans le formulaire");return}this.processing=!0,E.put(route("client.profil.update"),this.form,{onSuccess:()=>{this.processing=!1,this.v$.$reset(),this.$toast.success("Profil mis à jour avec succès !")},onError:s=>{this.processing=!1,this.$toast.error("Une erreur est survenue lors de la mise à jour")}})},formatDate(d){return d?new Date(d).toLocaleDateString("fr-FR"):""},formatDateTime(d){if(!d)return"";const s=new Date(d);return`${s.toLocaleDateString("fr-FR")} ${s.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}`},getValidationClass(d){return this.v$.form[d].$dirty?this.v$.form[d].$error?"is-invalid":"is-valid":""},getErrorMessage(d){return!this.v$.form[d].$dirty||!this.v$.form[d].$error?"":this.v$.form[d].$errors[0].$message}}},D={class:"row"},N={class:"col-md-6 mb-4"},U={class:"card"},z={class:"card-body"},S={class:"mb-3"},T=["value"],q={class:"mb-3"},j={key:0,class:"invalid-feedback"},A={key:1,class:"invalid-feedback"},F={class:"row mb-3"},R={class:"col-md-6"},I={key:0,class:"invalid-feedback"},O={key:1,class:"invalid-feedback"},G={class:"col-md-6"},J={key:0,class:"invalid-feedback"},H={key:1,class:"invalid-feedback"},K={class:"mb-3"},Q={key:0,class:"invalid-feedback"},W={key:1,class:"invalid-feedback"},X={class:"row mb-3"},Y={class:"col-md-4"},Z={key:0,class:"invalid-feedback"},$={key:1,class:"invalid-feedback"},ee={class:"col-md-5"},se={key:0,class:"invalid-feedback"},te={key:1,class:"invalid-feedback"},le={class:"col-md-3"},re={key:0,class:"invalid-feedback"},oe={key:1,class:"invalid-feedback"},ie={class:"d-grid"},ae=["disabled"],ne={key:0},de={key:1},me={class:"col-md-6 mb-4"},ue={class:"card"},ce={class:"card-body"},fe={class:"table table-borderless"},ve=["href"],be={key:0,class:"card mt-4"},ge={class:"card-body"},he={class:"table table-borderless"};function pe(d,s,r,m,n,l){const y=M("ClientLayout");return i(),L(y,{title:"Mon Profil"},{default:x(()=>[s[38]||(s[38]=e("div",{class:"mb-4"},[e("h1",{class:"h3"},"Mon Profil"),e("p",{class:"text-muted"},"Gérez vos informations personnelles")],-1)),e("div",D,[e("div",N,[e("div",U,[s[25]||(s[25]=e("div",{class:"card-header"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-user me-2"}),h("Informations Personnelles")])],-1)),e("div",z,[e("form",{onSubmit:s[14]||(s[14]=w((...t)=>l.updateProfile&&l.updateProfile(...t),["prevent"]))},[e("div",S,[s[15]||(s[15]=e("label",{class:"form-label"},"Nom Complet",-1)),e("input",{type:"text",class:"form-control",value:`${r.client.prenom} ${r.client.nom}`,readonly:""},null,8,T),s[16]||(s[16]=e("small",{class:"text-muted"},"Pour modifier votre nom, contactez notre service.",-1))]),e("div",q,[s[17]||(s[17]=e("label",{for:"email",class:"form-label"},"Email *",-1)),f(e("input",{type:"email","onUpdate:modelValue":s[0]||(s[0]=t=>n.form.email=t),onBlur:s[1]||(s[1]=(...t)=>m.v$.form.email.$touch&&m.v$.form.email.$touch(...t)),class:v(["form-control",l.getValidationClass("email")]),id:"email"},null,34),[[b,n.form.email]]),l.getErrorMessage("email")?(i(),a("div",j,o(l.getErrorMessage("email")),1)):r.errors.email?(i(),a("div",A,o(r.errors.email),1)):c("",!0)]),e("div",F,[e("div",R,[s[18]||(s[18]=e("label",{for:"telephone",class:"form-label"},"Téléphone",-1)),f(e("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=t=>n.form.telephone=t),onBlur:s[3]||(s[3]=(...t)=>m.v$.form.telephone.$touch&&m.v$.form.telephone.$touch(...t)),class:v(["form-control",l.getValidationClass("telephone")]),id:"telephone",placeholder:"Ex: 01 23 45 67 89"},null,34),[[b,n.form.telephone]]),l.getErrorMessage("telephone")?(i(),a("div",I,o(l.getErrorMessage("telephone")),1)):r.errors.telephone?(i(),a("div",O,o(r.errors.telephone),1)):c("",!0)]),e("div",G,[s[19]||(s[19]=e("label",{for:"mobile",class:"form-label"},"Mobile",-1)),f(e("input",{type:"text","onUpdate:modelValue":s[4]||(s[4]=t=>n.form.mobile=t),onBlur:s[5]||(s[5]=(...t)=>m.v$.form.mobile.$touch&&m.v$.form.mobile.$touch(...t)),class:v(["form-control",l.getValidationClass("mobile")]),id:"mobile",placeholder:"Ex: 06 12 34 56 78"},null,34),[[b,n.form.mobile]]),l.getErrorMessage("mobile")?(i(),a("div",J,o(l.getErrorMessage("mobile")),1)):r.errors.mobile?(i(),a("div",H,o(r.errors.mobile),1)):c("",!0)])]),e("div",K,[s[20]||(s[20]=e("label",{for:"adresse",class:"form-label"},"Adresse",-1)),f(e("textarea",{"onUpdate:modelValue":s[6]||(s[6]=t=>n.form.adresse=t),onBlur:s[7]||(s[7]=(...t)=>m.v$.form.adresse.$touch&&m.v$.form.adresse.$touch(...t)),class:v(["form-control",l.getValidationClass("adresse")]),id:"adresse",rows:"2",placeholder:"Numéro et nom de rue"},null,34),[[b,n.form.adresse]]),l.getErrorMessage("adresse")?(i(),a("div",Q,o(l.getErrorMessage("adresse")),1)):r.errors.adresse?(i(),a("div",W,o(r.errors.adresse),1)):c("",!0)]),e("div",X,[e("div",Y,[s[21]||(s[21]=e("label",{for:"code_postal",class:"form-label"},"Code Postal",-1)),f(e("input",{type:"text","onUpdate:modelValue":s[8]||(s[8]=t=>n.form.code_postal=t),onBlur:s[9]||(s[9]=(...t)=>m.v$.form.code_postal.$touch&&m.v$.form.code_postal.$touch(...t)),class:v(["form-control",l.getValidationClass("code_postal")]),id:"code_postal",placeholder:"75001"},null,34),[[b,n.form.code_postal]]),l.getErrorMessage("code_postal")?(i(),a("div",Z,o(l.getErrorMessage("code_postal")),1)):r.errors.code_postal?(i(),a("div",$,o(r.errors.code_postal),1)):c("",!0)]),e("div",ee,[s[22]||(s[22]=e("label",{for:"ville",class:"form-label"},"Ville",-1)),f(e("input",{type:"text","onUpdate:modelValue":s[10]||(s[10]=t=>n.form.ville=t),onBlur:s[11]||(s[11]=(...t)=>m.v$.form.ville.$touch&&m.v$.form.ville.$touch(...t)),class:v(["form-control",l.getValidationClass("ville")]),id:"ville",placeholder:"Paris"},null,34),[[b,n.form.ville]]),l.getErrorMessage("ville")?(i(),a("div",se,o(l.getErrorMessage("ville")),1)):r.errors.ville?(i(),a("div",te,o(r.errors.ville),1)):c("",!0)]),e("div",le,[s[23]||(s[23]=e("label",{for:"pays",class:"form-label"},"Pays",-1)),f(e("input",{type:"text","onUpdate:modelValue":s[12]||(s[12]=t=>n.form.pays=t),onBlur:s[13]||(s[13]=(...t)=>m.v$.form.pays.$touch&&m.v$.form.pays.$touch(...t)),class:v(["form-control",l.getValidationClass("pays")]),id:"pays",placeholder:"France"},null,34),[[b,n.form.pays]]),l.getErrorMessage("pays")?(i(),a("div",re,o(l.getErrorMessage("pays")),1)):r.errors.pays?(i(),a("div",oe,o(r.errors.pays),1)):c("",!0)])]),e("div",ie,[e("button",{type:"submit",class:"btn btn-primary",disabled:n.processing},[s[24]||(s[24]=e("i",{class:"fas fa-save me-2"},null,-1)),n.processing?(i(),a("span",ne,"Enregistrement...")):(i(),a("span",de,"Enregistrer les modifications"))],8,ae)])],32)])])]),e("div",me,[e("div",ue,[s[32]||(s[32]=e("div",{class:"card-header"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-lock me-2"}),h("Compte Utilisateur")])],-1)),e("div",ce,[e("table",fe,[e("tbody",null,[e("tr",null,[s[26]||(s[26]=e("th",{width:"40%"},"Email de connexion:",-1)),e("td",null,o(r.user.email),1)]),e("tr",null,[s[27]||(s[27]=e("th",null,"Dernière connexion:",-1)),e("td",null,o(r.user.last_login_at?l.formatDateTime(r.user.last_login_at):"Jamais"),1)]),e("tr",null,[s[28]||(s[28]=e("th",null,"Compte créé le:",-1)),e("td",null,o(l.formatDate(r.user.created_at)),1)])])]),s[30]||(s[30]=e("hr",null,null,-1)),s[31]||(s[31]=e("div",{class:"alert alert-info"},[e("i",{class:"fas fa-info-circle me-2"}),e("strong",null,"Changement de mot de passe"),e("br"),h(" Pour modifier votre mot de passe, rendez-vous dans les paramètres de votre profil utilisateur. ")],-1)),e("a",{href:d.route("profile.edit"),class:"btn btn-outline-primary w-100"},[...s[29]||(s[29]=[e("i",{class:"fas fa-key me-2"},null,-1),h("Gérer mon mot de passe ",-1)])],8,ve)])]),r.client.type_client==="entreprise"?(i(),a("div",be,[s[37]||(s[37]=e("div",{class:"card-header"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-building me-2"}),h("Informations Entreprise")])],-1)),e("div",ge,[e("table",he,[e("tbody",null,[e("tr",null,[s[33]||(s[33]=e("th",{width:"40%"},"Raison Sociale:",-1)),e("td",null,o(r.client.raison_sociale||"N/A"),1)]),e("tr",null,[s[34]||(s[34]=e("th",null,"SIRET:",-1)),e("td",null,o(r.client.siret||"N/A"),1)]),e("tr",null,[s[35]||(s[35]=e("th",null,"N° TVA:",-1)),e("td",null,o(r.client.numero_tva||"N/A"),1)])])]),s[36]||(s[36]=e("small",{class:"text-muted"}," Pour modifier ces informations, contactez notre service commercial. ",-1))])])):c("",!0)])]),s[39]||(s[39]=e("div",{class:"card bg-light"},[e("div",{class:"card-body"},[e("h5",null,[e("i",{class:"fas fa-question-circle me-2"}),h("Besoin d'aide ?")]),e("p",{class:"mb-0"}," Pour toute question ou modification ne pouvant être effectuée directement, n'hésitez pas à contacter notre service client. ")])],-1))]),_:1})}const Le=_(B,[["render",pe]]);export{Le as default};
