import{_ as O,r as h,f as M,o as d,w as q,a as t,d as n,n as f,g as j,h as r,c as m,i as u,F as C,j as S,t as i,v as B,k as w,l as g,m as L,p as v,q as p,s as I,u as y,x as R}from"./app-CRj_m259.js";import{C as z}from"./ClientLayout-C9U263p5.js";/* empty css            */const G={components:{ClientLayout:z},props:{clients:{type:Array,required:!0},boxes:{type:Array,required:!0},familles:{type:Array,default:()=>[]},errors:{type:Object,default:()=>({})}},setup(_){const s=p(1),c=p(!1),e=p(!0),D=p(!1),A=p(!0),x=p(""),o=p("libre"),k=p(""),F=p({}),a=I({client_id:"",box_id:"",numero_contrat:"",date_debut:new Date().toISOString().split("T")[0],date_fin:"",duree_mois:null,montant_loyer:0,depot_garantie:0,type_contrat:"stockage",statut:"actif",notes:"",options:{assurance:!1,acces_24h:!1,climatisation:!1,alarme:!1,electricite:!1,prelevement_auto:!1}}),T=y(()=>_.clients.find(l=>l.id===a.client_id)),N=y(()=>_.boxes.find(l=>l.id===a.box_id)),P=y(()=>{let l=_.boxes;return o.value&&(l=l.filter(b=>b.statut===o.value)),x.value&&(l=l.filter(b=>b.numero.toLowerCase().includes(x.value.toLowerCase()))),k.value&&(l=l.filter(b=>b.famille_id===k.value)),l}),V=y(()=>{let l=0;return a.options.assurance&&(l+=10),a.options.climatisation&&(l+=15),a.options.alarme&&(l+=5),a.options.electricite&&(l+=8),l}),U=y(()=>(a.montant_loyer||0)+V.value),E=y(()=>{const l=[];return a.options.assurance&&l.push("Assurance"),a.options.acces_24h&&l.push("Accès 24h/24"),a.options.climatisation&&l.push("Climatisation"),a.options.alarme&&l.push("Alarme"),a.options.electricite&&l.push("Électricité"),a.options.prelevement_auto&&l.push("Prélèvement auto"),l});return{step:s,form:a,processing:c,generateFacture:e,sendEmail:D,generatePDF:A,boxSearch:x,boxFilter:o,familleFilter:k,clientStats:F,selectedClient:T,selectedBox:N,filteredBoxes:P,montantOptions:V,totalMensuel:U,optionsSelectionnees:E,formatAmount:l=>!l&&l!==0?"0.00":parseFloat(l).toFixed(2),formatDate:l=>l?new Date(l).toLocaleDateString("fr-FR"):"",loadClientInfo:()=>{a.client_id&&(F.value={contrats_actifs:Math.floor(Math.random()*3)})},selectBox:l=>{(l.statut==="libre"||confirm("Ce box n'est pas libre. Continuer quand même ?"))&&(a.box_id=l.id,a.montant_loyer=l.tarif_mensuel||0)},filterBoxes:l=>{o.value=l},calculateDateFin:()=>{if(a.date_debut&&a.duree_mois){const l=new Date(a.date_debut);l.setMonth(l.getMonth()+a.duree_mois),a.date_fin=l.toISOString().split("T")[0]}else a.date_fin=""},calculateDepotAuto:l=>{l.target.checked&&(a.depot_garantie=a.montant_loyer)},getBoxStatusBadge:l=>({libre:"bg-success",occupe:"bg-danger",reserve:"bg-warning",maintenance:"bg-info"})[l]||"bg-secondary",getBoxStatusLabel:l=>({libre:"Libre",occupe:"Occupé",reserve:"Réservé",maintenance:"Maintenance"})[l]||l,getStatusBadge:l=>({actif:"badge bg-success",en_attente:"badge bg-warning",suspendu:"badge bg-secondary",resilie:"badge bg-danger"})[l]||"badge bg-secondary",getStatusLabel:l=>({actif:"Actif",en_attente:"En attente",suspendu:"Suspendu",resilie:"Résilié"})[l]||l,nextStep:()=>{s.value<4&&s.value++},previousStep:()=>{s.value>1&&s.value--},submitForm:()=>{c.value=!0;const l={...a,total_mensuel:U.value,generate_facture:e.value,send_email:D.value,generate_pdf:A.value};R.post(route("contrats.store"),l,{onSuccess:()=>{c.value=!1},onError:()=>{c.value=!1,s.value=1}})}}}},H={class:"mb-4"},J={class:"d-flex justify-content-between align-items-center"},K=["href"],Q={class:"card mb-4"},W={class:"card-body"},X={class:"stepper-wrapper"},Y={class:"card mb-4"},Z={class:"card-body"},$={class:"row"},tt={class:"col-md-12 mb-3"},st=["value"],et={key:0},ot={key:0,class:"invalid-feedback"},lt={class:"border-top pt-3"},nt={class:"text-muted"},it=["href"],at={key:0,class:"alert alert-info mt-3"},rt={class:"row"},dt={class:"col-md-6"},mt={class:"mb-1"},ct={class:"mb-1"},ft={class:"mb-1"},ut={class:"col-md-6"},bt={class:"mb-1"},vt={class:"mb-1"},pt={class:"mb-0"},gt={class:"card-footer text-end"},_t=["disabled"],yt={class:"card mb-4"},xt={class:"card-header d-flex justify-content-between align-items-center"},kt={class:"card-body"},Ct={class:"row mb-3"},St={class:"col-md-4"},Bt={class:"col-md-4"},wt=["value"],Dt={class:"row"},At=["onClick"],Ft={class:"card-body"},Vt={class:"d-flex justify-content-between align-items-start mb-2"},Ut={class:"mb-0"},Lt={class:"text-muted small mb-2"},Tt={class:"d-flex justify-content-between align-items-center"},Nt={class:"text-end"},Pt={class:"text-muted d-block"},Et={class:"text-primary"},Ot={key:0,class:"col-12"},ht={key:0,class:"alert alert-success mt-3"},Mt={class:"alert-heading"},qt={class:"row"},jt={class:"col-md-3"},It={class:"mb-0"},Rt={class:"col-md-3"},zt={class:"mb-0"},Gt={class:"col-md-3"},Ht={class:"mb-0"},Jt={class:"col-md-3"},Kt={class:"mb-0"},Qt={class:"card-footer d-flex justify-content-between"},Wt=["disabled"],Xt={class:"card mb-4"},Yt={class:"card-body"},Zt={class:"row"},$t={class:"col-md-4 mb-3"},ts={class:"col-md-4 mb-3"},ss={key:0,class:"invalid-feedback"},es={class:"col-md-4 mb-3"},os={class:"row"},ls={class:"col-md-4 mb-3"},ns=["disabled"],is={class:"col-md-4 mb-3"},as={class:"text-success"},rs={key:0,class:"invalid-feedback"},ds={class:"col-md-4 mb-3"},ms={class:"form-check mt-1"},cs={class:"row"},fs={class:"col-md-6 mb-3"},us={class:"col-md-6 mb-3"},bs={class:"border-top pt-3 mt-3"},vs={class:"row"},ps={class:"col-md-6"},gs={class:"form-check mb-2"},_s={class:"form-check mb-2"},ys={class:"form-check mb-2"},xs={class:"col-md-6"},ks={class:"form-check mb-2"},Cs={class:"form-check mb-2"},Ss={class:"form-check mb-2"},Bs={key:0,class:"alert alert-light mt-3"},ws={class:"border-top pt-3 mt-3"},Ds={class:"card-footer d-flex justify-content-between"},As={class:"card mb-4"},Fs={class:"card-body"},Vs={class:"row"},Us={class:"col-md-6 mb-4"},Ls={class:"mb-1"},Ts={class:"mb-1"},Ns={class:"mb-1"},Ps={class:"mb-0"},Es={class:"col-md-6 mb-4"},Os={class:"mb-1"},hs={class:"mb-1"},Ms={class:"mb-1"},qs={class:"mb-0"},js={class:"mb-4"},Is={class:"row"},Rs={class:"col-md-4"},zs={class:"mb-1"},Gs={class:"mb-1"},Hs={class:"col-md-4"},Js={class:"mb-1"},Ks={class:"mb-1"},Qs={class:"col-md-4"},Ws={class:"mb-1"},Xs={class:"mb-1"},Ys={class:"mb-4"},Zs={class:"table table-sm table-borderless"},$s={class:"text-end"},te={key:0},se={class:"text-end"},ee={class:"table-primary"},oe={class:"text-end"},le={class:"fs-5"},ne={class:"text-end"},ie={key:0,class:"mb-4"},ae={class:"d-flex flex-wrap gap-2"},re={key:1,class:"mb-4"},de={class:"text-muted"},me={class:"border-top pt-3"},ce={class:"form-check mb-2"},fe={class:"form-check mb-2"},ue={class:"form-check"},be={class:"card-footer d-flex justify-content-between"},ve=["disabled"],pe={key:0},ge={key:1};function _e(_,s,c,e,D,A){const x=h("ClientLayout");return d(),M(x,{title:"Créer un Contrat"},{default:q(()=>[t("div",H,[t("div",J,[s[34]||(s[34]=t("h1",{class:"h3"},[t("i",{class:"fas fa-file-contract me-2"}),n(" Créer un Nouveau Contrat ")],-1)),t("a",{href:_.route("contrats.index"),class:"btn btn-secondary"},[...s[33]||(s[33]=[t("i",{class:"fas fa-arrow-left me-2"},null,-1),n("Retour ",-1)])],8,K)])]),t("div",Q,[t("div",W,[t("div",X,[t("div",{class:f(["stepper-item",{completed:e.step>1,active:e.step===1}])},[...s[35]||(s[35]=[t("div",{class:"step-counter"},"1",-1),t("div",{class:"step-name"},"Client",-1)])],2),t("div",{class:f(["stepper-item",{completed:e.step>2,active:e.step===2}])},[...s[36]||(s[36]=[t("div",{class:"step-counter"},"2",-1),t("div",{class:"step-name"},"Box",-1)])],2),t("div",{class:f(["stepper-item",{completed:e.step>3,active:e.step===3}])},[...s[37]||(s[37]=[t("div",{class:"step-counter"},"3",-1),t("div",{class:"step-name"},"Détails",-1)])],2),t("div",{class:f(["stepper-item",{active:e.step===4}])},[...s[38]||(s[38]=[t("div",{class:"step-counter"},"4",-1),t("div",{class:"step-name"},"Validation",-1)])],2)])])]),t("form",{onSubmit:s[32]||(s[32]=j((...o)=>e.submitForm&&e.submitForm(...o),["prevent"]))},[r(t("div",Y,[s[51]||(s[51]=t("div",{class:"card-header"},[t("h5",{class:"mb-0"},[t("i",{class:"fas fa-user me-2"}),n(" Sélection du Client ")])],-1)),t("div",Z,[t("div",$,[t("div",tt,[s[40]||(s[40]=t("label",{class:"form-label"},"Client *",-1)),r(t("select",{"onUpdate:modelValue":s[0]||(s[0]=o=>e.form.client_id=o),onChange:s[1]||(s[1]=(...o)=>e.loadClientInfo&&e.loadClientInfo(...o)),class:f(["form-select",{"is-invalid":c.errors.client_id}]),required:""},[s[39]||(s[39]=t("option",{value:""},"Sélectionnez un client...",-1)),(d(!0),m(C,null,S(c.clients,o=>(d(),m("option",{key:o.id,value:o.id},[n(i(o.prenom)+" "+i(o.nom)+" - "+i(o.email)+" ",1),o.type_client?(d(),m("span",et,"("+i(o.type_client)+")",1)):u("",!0)],8,st))),128))],34),[[B,e.form.client_id]]),c.errors.client_id?(d(),m("div",ot,i(c.errors.client_id),1)):u("",!0)])]),t("div",lt,[t("p",nt,[s[41]||(s[41]=t("i",{class:"fas fa-info-circle me-1"},null,-1)),s[42]||(s[42]=n(" Le client n'existe pas encore ? ",-1)),t("a",{href:_.route("admin.clients.create"),class:"ms-2"},"Créer un nouveau client",8,it)])]),e.selectedClient?(d(),m("div",at,[s[49]||(s[49]=t("h6",{class:"alert-heading"},[t("i",{class:"fas fa-user-check me-2"}),n(" Client Sélectionné ")],-1)),t("div",rt,[t("div",dt,[t("p",mt,[s[43]||(s[43]=t("strong",null,"Nom :",-1)),n(" "+i(e.selectedClient.prenom)+" "+i(e.selectedClient.nom),1)]),t("p",ct,[s[44]||(s[44]=t("strong",null,"Email :",-1)),n(" "+i(e.selectedClient.email),1)]),t("p",ft,[s[45]||(s[45]=t("strong",null,"Téléphone :",-1)),n(" "+i(e.selectedClient.telephone||"N/A"),1)])]),t("div",ut,[t("p",bt,[s[46]||(s[46]=t("strong",null,"Adresse :",-1)),n(" "+i(e.selectedClient.adresse||"N/A"),1)]),t("p",vt,[s[47]||(s[47]=t("strong",null,"Type :",-1)),t("span",{class:f(["badge",e.selectedClient.type_client==="particulier"?"bg-primary":"bg-info"])},i(e.selectedClient.type_client||"Particulier"),3)]),t("p",pt,[s[48]||(s[48]=t("strong",null,"Contrats actifs :",-1)),n(" "+i(e.clientStats.contrats_actifs||0),1)])])])])):u("",!0)]),t("div",gt,[t("button",{type:"button",onClick:s[2]||(s[2]=(...o)=>e.nextStep&&e.nextStep(...o)),class:"btn btn-primary",disabled:!e.form.client_id},[...s[50]||(s[50]=[n(" Suivant ",-1),t("i",{class:"fas fa-arrow-right ms-2"},null,-1)])],8,_t)])],512),[[w,e.step===1]]),r(t("div",yt,[t("div",xt,[s[52]||(s[52]=t("h5",{class:"mb-0"},[t("i",{class:"fas fa-box me-2"}),n(" Sélection du Box ")],-1)),t("div",null,[t("button",{type:"button",onClick:s[3]||(s[3]=o=>e.filterBoxes("")),class:f(["btn btn-sm",e.boxFilter===""?"btn-primary":"btn-outline-secondary"])}," Tous ",2),t("button",{type:"button",onClick:s[4]||(s[4]=o=>e.filterBoxes("libre")),class:f(["btn btn-sm ms-1",e.boxFilter==="libre"?"btn-success":"btn-outline-success"])}," Libres ",2)])]),t("div",kt,[t("div",Ct,[t("div",St,[r(t("input",{"onUpdate:modelValue":s[5]||(s[5]=o=>e.boxSearch=o),type:"text",class:"form-control",placeholder:"Rechercher N° box..."},null,512),[[g,e.boxSearch]])]),t("div",Bt,[r(t("select",{"onUpdate:modelValue":s[6]||(s[6]=o=>e.familleFilter=o),class:"form-select"},[s[53]||(s[53]=t("option",{value:""},"Toutes les familles",-1)),(d(!0),m(C,null,S(c.familles,o=>(d(),m("option",{key:o.id,value:o.id},i(o.nom),9,wt))),128))],512),[[B,e.familleFilter]])])]),t("div",Dt,[(d(!0),m(C,null,S(e.filteredBoxes,o=>(d(),m("div",{key:o.id,class:"col-md-4 mb-3"},[t("div",{class:f(["card box-card",{"border-primary":e.form.box_id===o.id,"border-success":o.statut==="libre"&&e.form.box_id!==o.id,"border-secondary":o.statut!=="libre"&&e.form.box_id!==o.id}]),onClick:k=>e.selectBox(o),style:{cursor:"pointer"}},[t("div",Ft,[t("div",Vt,[t("h6",Ut,[s[54]||(s[54]=t("i",{class:"fas fa-box-open me-1"},null,-1)),n(" Box "+i(o.numero),1)]),t("span",{class:"badge",style:L({backgroundColor:o.famille?.couleur||"#6c757d"})},i(o.famille?.nom||"N/A"),5)]),t("p",Lt,[s[55]||(s[55]=t("i",{class:"fas fa-map-marker-alt me-1"},null,-1)),n(" "+i(o.emplacement?.nom||"N/A"),1)]),t("div",Tt,[t("div",null,[t("span",{class:f(["badge",e.getBoxStatusBadge(o.statut)])},i(e.getBoxStatusLabel(o.statut)),3)]),t("div",Nt,[t("small",Pt,i(o.surface)+" m²",1),t("strong",Et,i(e.formatAmount(o.tarif_mensuel))+"€/mois",1)])])])],10,At)]))),128)),e.filteredBoxes.length===0?(d(),m("div",Ot,[...s[56]||(s[56]=[t("div",{class:"alert alert-warning"},[t("i",{class:"fas fa-exclamation-triangle me-2"}),n(" Aucun box disponible avec ces critères ")],-1)])])):u("",!0)]),e.selectedBox?(d(),m("div",ht,[t("h6",Mt,[s[57]||(s[57]=t("i",{class:"fas fa-check-circle me-2"},null,-1)),n(" Box Sélectionné : "+i(e.selectedBox.numero),1)]),t("div",qt,[t("div",jt,[t("p",It,[s[58]||(s[58]=t("strong",null,"Surface :",-1)),n(" "+i(e.selectedBox.surface)+" m²",1)])]),t("div",Rt,[t("p",zt,[s[59]||(s[59]=t("strong",null,"Volume :",-1)),n(" "+i(e.selectedBox.volume||"N/A")+" m³",1)])]),t("div",Gt,[t("p",Ht,[s[60]||(s[60]=t("strong",null,"Famille :",-1)),n(" "+i(e.selectedBox.famille?.nom),1)])]),t("div",Jt,[t("p",Kt,[s[61]||(s[61]=t("strong",null,"Tarif :",-1)),n(" "+i(e.formatAmount(e.selectedBox.tarif_mensuel))+"€/mois",1)])])])])):u("",!0)]),t("div",Qt,[t("button",{type:"button",onClick:s[7]||(s[7]=(...o)=>e.previousStep&&e.previousStep(...o)),class:"btn btn-secondary"},[...s[62]||(s[62]=[t("i",{class:"fas fa-arrow-left me-2"},null,-1),n("Précédent ",-1)])]),t("button",{type:"button",onClick:s[8]||(s[8]=(...o)=>e.nextStep&&e.nextStep(...o)),class:"btn btn-primary",disabled:!e.form.box_id},[...s[63]||(s[63]=[n(" Suivant ",-1),t("i",{class:"fas fa-arrow-right ms-2"},null,-1)])],8,Wt)])],512),[[w,e.step===2]]),r(t("div",Xt,[s[89]||(s[89]=t("div",{class:"card-header"},[t("h5",{class:"mb-0"},[t("i",{class:"fas fa-edit me-2"}),n(" Détails du Contrat ")])],-1)),t("div",Yt,[t("div",Zt,[t("div",$t,[s[64]||(s[64]=t("label",{class:"form-label"},"Numéro de Contrat",-1)),r(t("input",{"onUpdate:modelValue":s[9]||(s[9]=o=>e.form.numero_contrat=o),type:"text",class:"form-control",placeholder:"AUTO"},null,512),[[g,e.form.numero_contrat]]),s[65]||(s[65]=t("small",{class:"text-muted"},"Laissez vide pour génération automatique",-1))]),t("div",ts,[s[66]||(s[66]=t("label",{class:"form-label"},"Date de Début *",-1)),r(t("input",{"onUpdate:modelValue":s[10]||(s[10]=o=>e.form.date_debut=o),type:"date",class:f(["form-control",{"is-invalid":c.errors.date_debut}]),required:""},null,2),[[g,e.form.date_debut]]),c.errors.date_debut?(d(),m("div",ss,i(c.errors.date_debut),1)):u("",!0)]),t("div",es,[s[67]||(s[67]=t("label",{class:"form-label"},"Durée (mois)",-1)),r(t("input",{"onUpdate:modelValue":s[11]||(s[11]=o=>e.form.duree_mois=o),onInput:s[12]||(s[12]=(...o)=>e.calculateDateFin&&e.calculateDateFin(...o)),type:"number",class:"form-control",min:"1",placeholder:"Ex: 12"},null,544),[[g,e.form.duree_mois,void 0,{number:!0}]]),s[68]||(s[68]=t("small",{class:"text-muted"},"Laissez vide pour durée indéterminée",-1))])]),t("div",os,[t("div",ls,[s[69]||(s[69]=t("label",{class:"form-label"},"Date de Fin",-1)),r(t("input",{"onUpdate:modelValue":s[13]||(s[13]=o=>e.form.date_fin=o),type:"date",class:"form-control",disabled:!e.form.duree_mois},null,8,ns),[[g,e.form.date_fin]]),s[70]||(s[70]=t("small",{class:"text-muted"},"Calculée automatiquement si durée définie",-1))]),t("div",is,[s[71]||(s[71]=t("label",{class:"form-label"},"Loyer Mensuel (€) *",-1)),r(t("input",{"onUpdate:modelValue":s[14]||(s[14]=o=>e.form.montant_loyer=o),type:"number",class:f(["form-control",{"is-invalid":c.errors.montant_loyer}]),step:"0.01",min:"0",required:""},null,2),[[g,e.form.montant_loyer,void 0,{number:!0}]]),t("small",as,"Tarif box: "+i(e.formatAmount(e.selectedBox?.tarif_mensuel))+"€",1),c.errors.montant_loyer?(d(),m("div",rs,i(c.errors.montant_loyer),1)):u("",!0)]),t("div",ds,[s[73]||(s[73]=t("label",{class:"form-label"},"Dépôt de Garantie (€)",-1)),r(t("input",{"onUpdate:modelValue":s[15]||(s[15]=o=>e.form.depot_garantie=o),type:"number",class:"form-control",step:"0.01",min:"0"},null,512),[[g,e.form.depot_garantie,void 0,{number:!0}]]),t("div",ms,[t("input",{type:"checkbox",class:"form-check-input",id:"autoDepot",onChange:s[16]||(s[16]=(...o)=>e.calculateDepotAuto&&e.calculateDepotAuto(...o))},null,32),s[72]||(s[72]=t("label",{class:"form-check-label small",for:"autoDepot"}," = 1 mois de loyer ",-1))])])]),t("div",cs,[t("div",fs,[s[75]||(s[75]=t("label",{class:"form-label"},"Type de Contrat",-1)),r(t("select",{"onUpdate:modelValue":s[17]||(s[17]=o=>e.form.type_contrat=o),class:"form-select"},[...s[74]||(s[74]=[t("option",{value:"stockage"},"Stockage Simple",-1),t("option",{value:"archive"},"Archivage",-1),t("option",{value:"professionnel"},"Professionnel",-1),t("option",{value:"particulier"},"Particulier",-1)])],512),[[B,e.form.type_contrat]])]),t("div",us,[s[77]||(s[77]=t("label",{class:"form-label"},"Statut",-1)),r(t("select",{"onUpdate:modelValue":s[18]||(s[18]=o=>e.form.statut=o),class:"form-select"},[...s[76]||(s[76]=[t("option",{value:"actif"},"Actif",-1),t("option",{value:"en_attente"},"En attente de signature",-1),t("option",{value:"suspendu"},"Suspendu",-1)])],512),[[B,e.form.statut]])])]),t("div",bs,[s[85]||(s[85]=t("h6",{class:"mb-3"},"Options et Services",-1)),t("div",vs,[t("div",ps,[t("div",gs,[r(t("input",{"onUpdate:modelValue":s[19]||(s[19]=o=>e.form.options.assurance=o),type:"checkbox",class:"form-check-input",id:"assurance"},null,512),[[v,e.form.options.assurance]]),s[78]||(s[78]=t("label",{class:"form-check-label",for:"assurance"},[t("i",{class:"fas fa-shield-alt me-1"}),n(" Assurance (+ 10€/mois) ")],-1))]),t("div",_s,[r(t("input",{"onUpdate:modelValue":s[20]||(s[20]=o=>e.form.options.acces_24h=o),type:"checkbox",class:"form-check-input",id:"acces24h"},null,512),[[v,e.form.options.acces_24h]]),s[79]||(s[79]=t("label",{class:"form-check-label",for:"acces24h"},[t("i",{class:"fas fa-clock me-1"}),n(" Accès 24h/24 ")],-1))]),t("div",ys,[r(t("input",{"onUpdate:modelValue":s[21]||(s[21]=o=>e.form.options.climatisation=o),type:"checkbox",class:"form-check-input",id:"climatisation"},null,512),[[v,e.form.options.climatisation]]),s[80]||(s[80]=t("label",{class:"form-check-label",for:"climatisation"},[t("i",{class:"fas fa-snowflake me-1"}),n(" Climatisation (+ 15€/mois) ")],-1))])]),t("div",xs,[t("div",ks,[r(t("input",{"onUpdate:modelValue":s[22]||(s[22]=o=>e.form.options.alarme=o),type:"checkbox",class:"form-check-input",id:"alarme"},null,512),[[v,e.form.options.alarme]]),s[81]||(s[81]=t("label",{class:"form-check-label",for:"alarme"},[t("i",{class:"fas fa-bell me-1"}),n(" Alarme individuelle (+ 5€/mois) ")],-1))]),t("div",Cs,[r(t("input",{"onUpdate:modelValue":s[23]||(s[23]=o=>e.form.options.electricite=o),type:"checkbox",class:"form-check-input",id:"electricite"},null,512),[[v,e.form.options.electricite]]),s[82]||(s[82]=t("label",{class:"form-check-label",for:"electricite"},[t("i",{class:"fas fa-plug me-1"}),n(" Prise électrique (+ 8€/mois) ")],-1))]),t("div",Ss,[r(t("input",{"onUpdate:modelValue":s[24]||(s[24]=o=>e.form.options.prelevement_auto=o),type:"checkbox",class:"form-check-input",id:"prelevement"},null,512),[[v,e.form.options.prelevement_auto]]),s[83]||(s[83]=t("label",{class:"form-check-label",for:"prelevement"},[t("i",{class:"fas fa-credit-card me-1"}),n(" Prélèvement automatique ")],-1))])])]),e.montantOptions>0?(d(),m("div",Bs,[s[84]||(s[84]=t("strong",null,"Total options :",-1)),n(" + "+i(e.formatAmount(e.montantOptions))+"€/mois ",1)])):u("",!0)]),t("div",ws,[s[86]||(s[86]=t("label",{class:"form-label"},"Notes / Conditions Particulières",-1)),r(t("textarea",{"onUpdate:modelValue":s[25]||(s[25]=o=>e.form.notes=o),class:"form-control",rows:"3",placeholder:"Ajouter des notes ou conditions particulières..."},null,512),[[g,e.form.notes]])])]),t("div",Ds,[t("button",{type:"button",onClick:s[26]||(s[26]=(...o)=>e.previousStep&&e.previousStep(...o)),class:"btn btn-secondary"},[...s[87]||(s[87]=[t("i",{class:"fas fa-arrow-left me-2"},null,-1),n("Précédent ",-1)])]),t("button",{type:"button",onClick:s[27]||(s[27]=(...o)=>e.nextStep&&e.nextStep(...o)),class:"btn btn-primary"},[...s[88]||(s[88]=[n(" Suivant ",-1),t("i",{class:"fas fa-arrow-right ms-2"},null,-1)])])])],512),[[w,e.step===3]]),r(t("div",As,[s[121]||(s[121]=t("div",{class:"card-header"},[t("h5",{class:"mb-0"},[t("i",{class:"fas fa-check-circle me-2"}),n(" Récapitulatif et Validation ")])],-1)),t("div",Fs,[t("div",Vs,[t("div",Us,[s[94]||(s[94]=t("h6",{class:"text-primary mb-3"},"Client",-1)),t("p",Ls,[s[90]||(s[90]=t("strong",null,"Nom :",-1)),n(" "+i(e.selectedClient?.prenom)+" "+i(e.selectedClient?.nom),1)]),t("p",Ts,[s[91]||(s[91]=t("strong",null,"Email :",-1)),n(" "+i(e.selectedClient?.email),1)]),t("p",Ns,[s[92]||(s[92]=t("strong",null,"Téléphone :",-1)),n(" "+i(e.selectedClient?.telephone),1)]),t("p",Ps,[s[93]||(s[93]=t("strong",null,"Type :",-1)),n(" "+i(e.selectedClient?.type_client||"Particulier"),1)])]),t("div",Es,[s[99]||(s[99]=t("h6",{class:"text-primary mb-3"},"Box",-1)),t("p",Os,[s[95]||(s[95]=t("strong",null,"Numéro :",-1)),n(" Box "+i(e.selectedBox?.numero),1)]),t("p",hs,[s[96]||(s[96]=t("strong",null,"Famille :",-1)),t("span",{class:"badge",style:L({backgroundColor:e.selectedBox?.famille?.couleur})},i(e.selectedBox?.famille?.nom),5)]),t("p",Ms,[s[97]||(s[97]=t("strong",null,"Surface :",-1)),n(" "+i(e.selectedBox?.surface)+" m²",1)]),t("p",qs,[s[98]||(s[98]=t("strong",null,"Emplacement :",-1)),n(" "+i(e.selectedBox?.emplacement?.nom),1)])])]),t("div",js,[s[107]||(s[107]=t("h6",{class:"text-primary mb-3"},"Détails du Contrat",-1)),t("div",Is,[t("div",Rs,[t("p",zs,[s[100]||(s[100]=t("strong",null,"N° Contrat :",-1)),n(" "+i(e.form.numero_contrat||"AUTO"),1)]),t("p",Gs,[s[101]||(s[101]=t("strong",null,"Type :",-1)),n(" "+i(e.form.type_contrat),1)])]),t("div",Hs,[t("p",Js,[s[102]||(s[102]=t("strong",null,"Date début :",-1)),n(" "+i(e.formatDate(e.form.date_debut)),1)]),t("p",Ks,[s[103]||(s[103]=t("strong",null,"Date fin :",-1)),n(" "+i(e.form.date_fin?e.formatDate(e.form.date_fin):"Indéterminée"),1)])]),t("div",Qs,[t("p",Ws,[s[104]||(s[104]=t("strong",null,"Durée :",-1)),n(" "+i(e.form.duree_mois||"Indéterminée")+" mois",1)]),t("p",Xs,[s[105]||(s[105]=t("strong",null,"Statut :",-1)),s[106]||(s[106]=n()),t("span",{class:f(e.getStatusBadge(e.form.statut))},i(e.getStatusLabel(e.form.statut)),3)])])])]),t("div",Ys,[s[112]||(s[112]=t("h6",{class:"text-primary mb-3"},"Montants",-1)),t("table",Zs,[t("tr",null,[s[108]||(s[108]=t("td",{width:"60%"},"Loyer mensuel de base :",-1)),t("td",$s,[t("strong",null,i(e.formatAmount(e.form.montant_loyer))+" €",1)])]),e.montantOptions>0?(d(),m("tr",te,[s[109]||(s[109]=t("td",null,"Options :",-1)),t("td",se,"+ "+i(e.formatAmount(e.montantOptions))+" €",1)])):u("",!0),t("tr",ee,[s[110]||(s[110]=t("td",null,[t("strong",null,"Total mensuel :")],-1)),t("td",oe,[t("strong",le,i(e.formatAmount(e.totalMensuel))+" €",1)])]),t("tr",null,[s[111]||(s[111]=t("td",null,"Dépôt de garantie :",-1)),t("td",ne,i(e.formatAmount(e.form.depot_garantie))+" €",1)])])]),e.optionsSelectionnees.length>0?(d(),m("div",ie,[s[113]||(s[113]=t("h6",{class:"text-primary mb-3"},"Options Sélectionnées",-1)),t("div",ae,[(d(!0),m(C,null,S(e.optionsSelectionnees,o=>(d(),m("span",{key:o,class:"badge bg-info"},i(o),1))),128))])])):u("",!0),e.form.notes?(d(),m("div",re,[s[114]||(s[114]=t("h6",{class:"text-primary mb-3"},"Notes",-1)),t("p",de,i(e.form.notes),1)])):u("",!0),t("div",me,[t("div",ce,[r(t("input",{"onUpdate:modelValue":s[28]||(s[28]=o=>e.generateFacture=o),type:"checkbox",class:"form-check-input",id:"generateFacture"},null,512),[[v,e.generateFacture]]),s[115]||(s[115]=t("label",{class:"form-check-label",for:"generateFacture"},[t("i",{class:"fas fa-file-invoice me-1"}),n(" Générer la première facture (loyer + dépôt de garantie) ")],-1))]),t("div",fe,[r(t("input",{"onUpdate:modelValue":s[29]||(s[29]=o=>e.sendEmail=o),type:"checkbox",class:"form-check-input",id:"sendEmailContrat"},null,512),[[v,e.sendEmail]]),s[116]||(s[116]=t("label",{class:"form-check-label",for:"sendEmailContrat"},[t("i",{class:"fas fa-envelope me-1"}),n(" Envoyer le contrat par email au client ")],-1))]),t("div",ue,[r(t("input",{"onUpdate:modelValue":s[30]||(s[30]=o=>e.generatePDF=o),type:"checkbox",class:"form-check-input",id:"generatePDFContrat",checked:""},null,512),[[v,e.generatePDF]]),s[117]||(s[117]=t("label",{class:"form-check-label",for:"generatePDFContrat"},[t("i",{class:"fas fa-file-pdf me-1"}),n(" Générer le PDF du contrat ")],-1))])])]),t("div",be,[t("button",{type:"button",onClick:s[31]||(s[31]=(...o)=>e.previousStep&&e.previousStep(...o)),class:"btn btn-secondary"},[...s[118]||(s[118]=[t("i",{class:"fas fa-arrow-left me-2"},null,-1),n("Précédent ",-1)])]),t("button",{type:"submit",class:"btn btn-success btn-lg",disabled:e.processing},[e.processing?(d(),m("span",pe,[...s[119]||(s[119]=[t("span",{class:"spinner-border spinner-border-sm me-2"},null,-1),n(" Création en cours... ",-1)])])):(d(),m("span",ge,[...s[120]||(s[120]=[t("i",{class:"fas fa-check me-2"},null,-1),n("Créer le Contrat ",-1)])]))],8,ve)])],512),[[w,e.step===4]])],32)]),_:1})}const Oe=O(G,[["render",_e],["__scopeId","data-v-5e619788"]]);export{Oe as default};
