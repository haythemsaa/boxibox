import{C as v}from"./ClientLayout-DE-sKSWk.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as i,f as m,o,w as f,a as t,c as d,i as c,d as u,t as n,n as _,F as b,j as h}from"./app-zGlaTtug.js";/* empty css            */const A={components:{ClientLayout:v},props:{facture:{type:Object,required:!0}},computed:{montantRegle(){return this.facture.reglements?this.facture.reglements.reduce((a,e)=>a+parseFloat(e.montant||0),0):0},resteAPayer(){return parseFloat(this.facture.montant_ttc||0)-this.montantRegle}},methods:{formatDate(a){return a?new Date(a).toLocaleDateString("fr-FR"):""},formatAmount(a){return a?parseFloat(a).toFixed(2):"0.00"},getStatusBadgeClass(a){return{payee:"badge bg-success",paye:"badge bg-success",impayee:"badge bg-danger",impaye:"badge bg-danger",en_attente:"badge bg-warning",en_retard:"badge bg-danger"}[a]||"badge bg-secondary"},getStatusLabel(a){return{payee:"Payée",paye:"Payée",impayee:"Impayée",impaye:"Impayée",en_attente:"En attente",en_retard:"En retard"}[a]||a.charAt(0).toUpperCase()+a.slice(1)},getPaymentIcon(a){return{virement:"fas fa-exchange-alt",cheque:"fas fa-money-check",especes:"fas fa-money-bill-wave",carte:"fas fa-credit-card",prelevement:"fas fa-university"}[a]||"fas fa-money-bill"},getPaymentLabel(a){return{virement:"Virement",cheque:"Chèque",especes:"Espèces",carte:"Carte",prelevement:"Prélèvement"}[a]||a.charAt(0).toUpperCase()+a.slice(1)}}},C={class:"mb-4"},k=["href"],w={class:"d-flex justify-content-between align-items-center"},D={class:"h3"},P={class:"btn-group"},F=["href"],L={class:"row"},R={class:"col-md-6 mb-4"},T={class:"card"},S={class:"card-body"},B={class:"table table-borderless"},I=["href"],M={key:1},N={class:"col-md-6 mb-4"},q={class:"card"},V={class:"card-body"},E={class:"table table-borderless"},j={class:"table-active"},H={class:"text-primary fs-5"},U={key:0},z={class:"text-success"},O={key:1},Q={class:"text-danger"},G={class:"card mb-4"},J={class:"card-body"},K={class:"table-responsive"},W={class:"table"},X={class:"text-center"},Y={class:"text-end"},Z={class:"text-end"},p={key:0},$={key:0,class:"card"},tt={class:"card-body"},et={class:"table-responsive"},at={class:"table"},st={class:"text-end"};function nt(a,e,s,lt,rt,l){const g=i("Link"),y=i("ClientLayout");return o(),m(y,{title:"Facture "+s.facture.numero_facture},{default:f(()=>[t("div",C,[t("a",{href:a.route("client.factures"),class:"btn btn-sm btn-secondary mb-2"},[...e[0]||(e[0]=[t("i",{class:"fas fa-arrow-left me-2"},null,-1),u("Retour ",-1)])],8,k),t("div",w,[t("h1",D,"Facture "+n(s.facture.numero_facture),1),t("div",P,[s.facture.statut!=="payee"?(o(),m(g,{key:0,href:a.route("client.payment.show",s.facture.id),class:"btn btn-success"},{default:f(()=>[...e[1]||(e[1]=[t("i",{class:"fas fa-credit-card me-2"},null,-1),u("Payer en ligne ",-1)])]),_:1},8,["href"])):c("",!0),t("a",{href:a.route("client.factures.pdf",s.facture.id),class:"btn btn-primary"},[...e[2]||(e[2]=[t("i",{class:"fas fa-download me-2"},null,-1),u("Télécharger PDF ",-1)])],8,F)])])]),t("div",L,[t("div",R,[t("div",T,[e[8]||(e[8]=t("div",{class:"card-header"},[t("h5",{class:"mb-0"},[t("i",{class:"fas fa-file-invoice me-2"}),u("Informations")])],-1)),t("div",S,[t("table",B,[t("tbody",null,[t("tr",null,[e[3]||(e[3]=t("th",{width:"40%"},"Numéro:",-1)),t("td",null,[t("strong",null,n(s.facture.numero_facture),1)])]),t("tr",null,[e[4]||(e[4]=t("th",null,"Date Émission:",-1)),t("td",null,n(l.formatDate(s.facture.date_emission)),1)]),t("tr",null,[e[5]||(e[5]=t("th",null,"Date Échéance:",-1)),t("td",null,n(l.formatDate(s.facture.date_echeance)),1)]),t("tr",null,[e[6]||(e[6]=t("th",null,"Contrat:",-1)),t("td",null,[s.facture.contrat?(o(),d("a",{key:0,href:a.route("client.contrats.show",s.facture.contrat.id)},n(s.facture.contrat.numero_contrat),9,I)):(o(),d("span",M,"N/A"))])]),t("tr",null,[e[7]||(e[7]=t("th",null,"Statut:",-1)),t("td",null,[t("span",{class:_(l.getStatusBadgeClass(s.facture.statut))},n(l.getStatusLabel(s.facture.statut)),3)])])])])])])]),t("div",N,[t("div",q,[e[13]||(e[13]=t("div",{class:"card-header"},[t("h5",{class:"mb-0"},[t("i",{class:"fas fa-euro-sign me-2"}),u("Montants")])],-1)),t("div",V,[t("table",E,[t("tbody",null,[t("tr",null,[e[9]||(e[9]=t("th",{width:"40%"},"Montant HT:",-1)),t("td",null,n(l.formatAmount(s.facture.montant_ht))+" €",1)]),t("tr",null,[t("th",null,"TVA ("+n(s.facture.taux_tva||20)+"%):",1),t("td",null,n(l.formatAmount(s.facture.montant_tva))+" €",1)]),t("tr",j,[e[10]||(e[10]=t("th",null,[t("strong",null,"Montant TTC:")],-1)),t("td",null,[t("strong",H,n(l.formatAmount(s.facture.montant_ttc))+" €",1)])]),l.montantRegle>0?(o(),d("tr",U,[e[11]||(e[11]=t("th",null,"Montant Réglé:",-1)),t("td",z,n(l.formatAmount(l.montantRegle))+" €",1)])):c("",!0),l.montantRegle>0?(o(),d("tr",O,[e[12]||(e[12]=t("th",null,"Reste à Payer:",-1)),t("td",Q,[t("strong",null,n(l.formatAmount(l.resteAPayer))+" €",1)])])):c("",!0)])])])])])]),t("div",G,[e[16]||(e[16]=t("div",{class:"card-header"},[t("h5",{class:"mb-0"},[t("i",{class:"fas fa-list me-2"}),u("Détail de la Facture")])],-1)),t("div",J,[t("div",K,[t("table",W,[e[15]||(e[15]=t("thead",null,[t("tr",null,[t("th",null,"Désignation"),t("th",{class:"text-center"},"Quantité"),t("th",{class:"text-end"},"Prix Unitaire HT"),t("th",{class:"text-end"},"Total HT")])],-1)),t("tbody",null,[(o(!0),d(b,null,h(s.facture.lignes,r=>(o(),d("tr",{key:r.id},[t("td",null,n(r.designation),1),t("td",X,n(r.quantite),1),t("td",Y,n(l.formatAmount(r.prix_unitaire_ht))+" €",1),t("td",Z,[t("strong",null,n(l.formatAmount(r.montant_total_ht))+" €",1)])]))),128)),!s.facture.lignes||s.facture.lignes.length===0?(o(),d("tr",p,[...e[14]||(e[14]=[t("td",{colspan:"4",class:"text-center text-muted"},"Aucune ligne de facture",-1)])])):c("",!0)])])])])]),s.facture.reglements&&s.facture.reglements.length>0?(o(),d("div",$,[e[18]||(e[18]=t("div",{class:"card-header"},[t("h5",{class:"mb-0"},[t("i",{class:"fas fa-money-bill me-2"}),u("Règlements")])],-1)),t("div",tt,[t("div",et,[t("table",at,[e[17]||(e[17]=t("thead",null,[t("tr",null,[t("th",null,"Date"),t("th",null,"Mode"),t("th",null,"Référence"),t("th",{class:"text-end"},"Montant")])],-1)),t("tbody",null,[(o(!0),d(b,null,h(s.facture.reglements,r=>(o(),d("tr",{key:r.id},[t("td",null,n(l.formatDate(r.date_reglement)),1),t("td",null,[t("i",{class:_([l.getPaymentIcon(r.mode_paiement),"me-1"])},null,2),u(" "+n(l.getPaymentLabel(r.mode_paiement)),1)]),t("td",null,n(r.reference||"N/A"),1),t("td",st,[t("strong",null,n(l.formatAmount(r.montant))+" €",1)])]))),128))])])])])])):c("",!0)]),_:1},8,["title"])}const it=x(A,[["render",nt],["__scopeId","data-v-49a4a272"]]);export{it as default};
