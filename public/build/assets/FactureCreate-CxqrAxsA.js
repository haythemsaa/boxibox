import{_ as B,r as R,f as O,o as d,w as z,a as t,d as a,n as b,g as H,h as r,c as u,i as v,F as k,j as S,t as n,v as x,k as T,l as p,p as D,q as C,s as M,u as h,x as V}from"./app-DscnimDf.js";import{C as Q}from"./ClientLayout-D-Q1RRq6.js";/* empty css            */const G={components:{ClientLayout:Q},props:{clients:{type:Array,required:!0},errors:{type:Object,default:()=>({})}},setup(F){const e=C(1),m=C(!1),s=C(!1),w=C(!0),g=C([]),i=M({client_id:"",contrat_id:"",numero_facture:"",date_emission:new Date().toISOString().split("T")[0],date_echeance:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],type_facture:"normale",taux_tva:20,statut:"en_attente",notes:"",avec_remise:!1,remise_pourcentage:0,lignes:[{designation:"",quantite:1,prix_unitaire_ht:0,montant_total_ht:0}]}),o=h(()=>F.clients.find(l=>l.id===i.client_id)),c=h(()=>g.value.find(l=>l.id===i.contrat_id)),f=h(()=>{const l=i.lignes.reduce((N,j)=>N+(j.montant_total_ht||0),0),y=i.avec_remise?l*i.remise_pourcentage/100:0,L=l-y,A=L*i.taux_tva/100,I=L+A;return{montant_ht:l,remise:y,montant_ht_apres_remise:L,montant_tva:A,montant_ttc:I}}),q=l=>!l&&l!==0?"0.00":parseFloat(l).toFixed(2),U=l=>l?new Date(l).toLocaleDateString("fr-FR"):"",E=async()=>{if(!i.client_id){g.value=[];return}V.get(route("admin.clients.contrats",i.client_id),{},{preserveState:!0,only:["contrats"],onSuccess:l=>{g.value=l.props.contrats||[]}})},P=l=>{l.montant_total_ht=(l.quantite||0)*(l.prix_unitaire_ht||0),_()},_=()=>{i.lignes=[...i.lignes]};return{step:e,form:i,processing:m,sendEmail:s,generatePDF:w,clientContrats:g,selectedClient:o,selectedContrat:c,totals:f,formatAmount:q,formatDate:U,loadClientContrats:E,calculateLigneTotal:P,calculateTotals:_,addLigne:()=>{i.lignes.push({designation:"",quantite:1,prix_unitaire_ht:0,montant_total_ht:0})},removeLigne:l=>{i.lignes.length>1&&(i.lignes.splice(l,1),_())},addTemplateLoyer:()=>{c.value?i.lignes.push({designation:`Loyer mensuel - Box ${c.value.box?.numero||""}`,quantite:1,prix_unitaire_ht:c.value.montant_loyer||0,montant_total_ht:c.value.montant_loyer||0}):i.lignes.push({designation:"Loyer mensuel",quantite:1,prix_unitaire_ht:0,montant_total_ht:0}),_()},addTemplateDepot:()=>{c.value?i.lignes.push({designation:`Dépôt de garantie - Box ${c.value.box?.numero||""}`,quantite:1,prix_unitaire_ht:c.value.depot_garantie||0,montant_total_ht:c.value.depot_garantie||0}):i.lignes.push({designation:"Dépôt de garantie",quantite:1,prix_unitaire_ht:0,montant_total_ht:0}),_()},addTemplateFrais:()=>{i.lignes.push({designation:"Frais de gestion",quantite:1,prix_unitaire_ht:15,montant_total_ht:15}),_()},nextStep:()=>{e.value<4&&e.value++},previousStep:()=>{e.value>1&&e.value--},getTypeLabel:l=>({normale:"Facture Normale",acompte:"Facture d'Acompte",solde:"Facture de Solde",avoir:"Avoir"})[l]||l,getStatusBadge:l=>({en_attente:"badge bg-warning",envoyee:"badge bg-info",payee:"badge bg-success"})[l]||"badge bg-secondary",getStatusLabel:l=>({en_attente:"En attente",envoyee:"Envoyée",payee:"Payée"})[l]||l,submitForm:()=>{m.value=!0;const l={...i,montant_ht:f.value.montant_ht_apres_remise,montant_tva:f.value.montant_tva,montant_ttc:f.value.montant_ttc,send_email:s.value,generate_pdf:w.value};V.post(route("admin.factures.store"),l,{onSuccess:()=>{m.value=!1},onError:()=>{m.value=!1,e.value=1}})}}}},J={class:"mb-4"},K={class:"d-flex justify-content-between align-items-center"},W=["href"],X={class:"card mb-4"},Y={class:"card-body"},Z={class:"stepper-wrapper"},$={class:"card mb-4"},tt={class:"card-body"},et={class:"row"},st={class:"col-md-6 mb-3"},ot=["value"],nt={key:0,class:"invalid-feedback"},lt={class:"col-md-6 mb-3"},at=["disabled"],it=["value"],rt={key:0,class:"alert alert-info"},dt={class:"mb-1"},mt={class:"mb-1"},ut={class:"mb-1"},ct={class:"mb-0"},ft={class:"card-footer text-end"},bt=["disabled"],vt={class:"card mb-4"},pt={class:"card-body"},_t={class:"row"},gt={class:"col-md-4 mb-3"},yt={key:0,class:"invalid-feedback"},xt={class:"col-md-4 mb-3"},Ct={key:0,class:"invalid-feedback"},kt={class:"col-md-4 mb-3"},St={key:0,class:"invalid-feedback"},Tt={class:"row"},Ft={class:"col-md-4 mb-3"},wt={class:"col-md-4 mb-3"},Lt={class:"col-md-4 mb-3"},Dt={class:"mb-3"},ht={class:"border-top pt-3 mt-3"},At={class:"row"},Vt={class:"col-md-4"},qt={class:"form-check"},Ut={key:0,class:"col-md-4"},Et={class:"card-footer d-flex justify-content-between"},Pt={class:"card mb-4"},It={class:"card-header d-flex justify-content-between align-items-center"},Nt={class:"card-body"},jt={class:"table-responsive"},Bt={class:"table table-bordered"},Rt=["onUpdate:modelValue"],Ot=["onUpdate:modelValue","onInput"],zt=["onUpdate:modelValue","onInput"],Ht={class:"text-end align-middle"},Mt={class:"text-center"},Qt=["onClick","disabled"],Gt={key:0},Jt={class:"border-top pt-3 mt-3"},Kt={class:"btn-group btn-group-sm",role:"group"},Wt={class:"card-footer d-flex justify-content-between"},Xt=["disabled"],Yt={class:"card mb-4"},Zt={class:"card-body"},$t={class:"row"},te={class:"col-md-6 mb-4"},ee={class:"mb-1"},se={class:"mb-1"},oe={class:"mb-1"},ne={class:"col-md-6 mb-4"},le={class:"mb-1"},ae={class:"mb-1"},ie={class:"mb-1"},re={class:"mb-1"},de={class:"mb-1"},me={class:"mb-4"},ue={class:"table-responsive"},ce={class:"table table-sm"},fe={class:"text-center"},be={class:"text-end"},ve={class:"text-end"},pe={class:"row"},_e={class:"col-md-4"},ge={class:"table table-borderless"},ye={class:"text-end"},xe={key:0},Ce={class:"text-end text-danger"},ke={class:"text-end"},Se={class:"table-primary"},Te={class:"text-end fs-5"},Fe={class:"border-top pt-3 mt-3"},we={class:"form-check mb-2"},Le={class:"form-check"},De={class:"card-footer d-flex justify-content-between"},he=["disabled"],Ae={key:0},Ve={key:1};function qe(F,e,m,s,w,g){const i=R("ClientLayout");return d(),O(i,{title:"Créer une Facture"},{default:z(()=>[t("div",J,[t("div",K,[e[28]||(e[28]=t("h1",{class:"h3"},[t("i",{class:"fas fa-file-invoice me-2"}),a(" Créer une Nouvelle Facture ")],-1)),t("a",{href:F.route("admin.factures.index"),class:"btn btn-secondary"},[...e[27]||(e[27]=[t("i",{class:"fas fa-arrow-left me-2"},null,-1),a("Retour ",-1)])],8,W)])]),t("div",X,[t("div",Y,[t("div",Z,[t("div",{class:b(["stepper-item",{completed:s.step>1,active:s.step===1}])},[...e[29]||(e[29]=[t("div",{class:"step-counter"},"1",-1),t("div",{class:"step-name"},"Client & Contrat",-1)])],2),t("div",{class:b(["stepper-item",{completed:s.step>2,active:s.step===2}])},[...e[30]||(e[30]=[t("div",{class:"step-counter"},"2",-1),t("div",{class:"step-name"},"Informations",-1)])],2),t("div",{class:b(["stepper-item",{completed:s.step>3,active:s.step===3}])},[...e[31]||(e[31]=[t("div",{class:"step-counter"},"3",-1),t("div",{class:"step-name"},"Lignes",-1)])],2),t("div",{class:b(["stepper-item",{active:s.step===4}])},[...e[32]||(e[32]=[t("div",{class:"step-counter"},"4",-1),t("div",{class:"step-name"},"Validation",-1)])],2)])])]),t("form",{onSubmit:e[26]||(e[26]=H((...o)=>s.submitForm&&s.submitForm(...o),["prevent"]))},[r(t("div",$,[e[44]||(e[44]=t("div",{class:"card-header"},[t("h5",{class:"mb-0"},[t("i",{class:"fas fa-user me-2"}),a(" Sélection du Client et du Contrat ")])],-1)),t("div",tt,[t("div",et,[t("div",st,[e[34]||(e[34]=t("label",{class:"form-label"},"Client *",-1)),r(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.form.client_id=o),onChange:e[1]||(e[1]=(...o)=>s.loadClientContrats&&s.loadClientContrats(...o)),class:b(["form-select",{"is-invalid":m.errors.client_id}]),required:""},[e[33]||(e[33]=t("option",{value:""},"Sélectionnez un client...",-1)),(d(!0),u(k,null,S(m.clients,o=>(d(),u("option",{key:o.id,value:o.id},n(o.prenom)+" "+n(o.nom)+" - "+n(o.email),9,ot))),128))],34),[[x,s.form.client_id]]),m.errors.client_id?(d(),u("div",nt,n(m.errors.client_id),1)):v("",!0)]),t("div",lt,[e[36]||(e[36]=t("label",{class:"form-label"},"Contrat (optionnel)",-1)),r(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.form.contrat_id=o),class:"form-select",disabled:!s.form.client_id},[e[35]||(e[35]=t("option",{value:""},"Sans contrat",-1)),(d(!0),u(k,null,S(s.clientContrats,o=>(d(),u("option",{key:o.id,value:o.id},n(o.numero_contrat)+" - Box "+n(o.box?.numero)+" - "+n(s.formatAmount(o.montant_loyer))+"€/mois ",9,it))),128))],8,at),[[x,s.form.contrat_id]]),e[37]||(e[37]=t("small",{class:"text-muted"},"Laissez vide pour une facture hors contrat",-1))])]),s.selectedClient?(d(),u("div",rt,[e[42]||(e[42]=t("h6",{class:"alert-heading"},"Client Sélectionné",-1)),t("p",dt,[e[38]||(e[38]=t("strong",null,"Nom :",-1)),a(" "+n(s.selectedClient.prenom)+" "+n(s.selectedClient.nom),1)]),t("p",mt,[e[39]||(e[39]=t("strong",null,"Email :",-1)),a(" "+n(s.selectedClient.email),1)]),t("p",ut,[e[40]||(e[40]=t("strong",null,"Téléphone :",-1)),a(" "+n(s.selectedClient.telephone||"N/A"),1)]),t("p",ct,[e[41]||(e[41]=t("strong",null,"Adresse :",-1)),a(" "+n(s.selectedClient.adresse||"N/A"),1)])])):v("",!0)]),t("div",ft,[t("button",{type:"button",onClick:e[3]||(e[3]=(...o)=>s.nextStep&&s.nextStep(...o)),class:"btn btn-primary",disabled:!s.form.client_id},[...e[43]||(e[43]=[a(" Suivant ",-1),t("i",{class:"fas fa-arrow-right ms-2"},null,-1)])],8,bt)])],512),[[T,s.step===1]]),r(t("div",vt,[e[60]||(e[60]=t("div",{class:"card-header"},[t("h5",{class:"mb-0"},[t("i",{class:"fas fa-info-circle me-2"}),a(" Informations de la Facture ")])],-1)),t("div",pt,[t("div",_t,[t("div",gt,[e[45]||(e[45]=t("label",{class:"form-label"},"Numéro de Facture *",-1)),r(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.form.numero_facture=o),type:"text",class:b(["form-control",{"is-invalid":m.errors.numero_facture}]),placeholder:"AUTO",required:""},null,2),[[p,s.form.numero_facture]]),e[46]||(e[46]=t("small",{class:"text-muted"},"Laissez vide pour génération automatique",-1)),m.errors.numero_facture?(d(),u("div",yt,n(m.errors.numero_facture),1)):v("",!0)]),t("div",xt,[e[47]||(e[47]=t("label",{class:"form-label"},"Date d'Émission *",-1)),r(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>s.form.date_emission=o),type:"date",class:b(["form-control",{"is-invalid":m.errors.date_emission}]),required:""},null,2),[[p,s.form.date_emission]]),m.errors.date_emission?(d(),u("div",Ct,n(m.errors.date_emission),1)):v("",!0)]),t("div",kt,[e[48]||(e[48]=t("label",{class:"form-label"},"Date d'Échéance *",-1)),r(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>s.form.date_echeance=o),type:"date",class:b(["form-control",{"is-invalid":m.errors.date_echeance}]),required:""},null,2),[[p,s.form.date_echeance]]),m.errors.date_echeance?(d(),u("div",St,n(m.errors.date_echeance),1)):v("",!0)])]),t("div",Tt,[t("div",Ft,[e[50]||(e[50]=t("label",{class:"form-label"},"Type de Facture",-1)),r(t("select",{"onUpdate:modelValue":e[7]||(e[7]=o=>s.form.type_facture=o),class:"form-select"},[...e[49]||(e[49]=[t("option",{value:"normale"},"Facture Normale",-1),t("option",{value:"acompte"},"Facture d'Acompte",-1),t("option",{value:"solde"},"Facture de Solde",-1),t("option",{value:"avoir"},"Avoir",-1)])],512),[[x,s.form.type_facture]])]),t("div",wt,[e[52]||(e[52]=t("label",{class:"form-label"},"Taux de TVA (%)",-1)),r(t("select",{"onUpdate:modelValue":e[8]||(e[8]=o=>s.form.taux_tva=o),onChange:e[9]||(e[9]=(...o)=>s.calculateTotals&&s.calculateTotals(...o)),class:"form-select"},[...e[51]||(e[51]=[t("option",{value:0},"0% (Exonéré)",-1),t("option",{value:5.5},"5,5% (Réduit)",-1),t("option",{value:10},"10% (Intermédiaire)",-1),t("option",{value:20},"20% (Normal)",-1)])],544),[[x,s.form.taux_tva,void 0,{number:!0}]])]),t("div",Lt,[e[54]||(e[54]=t("label",{class:"form-label"},"Statut",-1)),r(t("select",{"onUpdate:modelValue":e[10]||(e[10]=o=>s.form.statut=o),class:"form-select"},[...e[53]||(e[53]=[t("option",{value:"en_attente"},"En attente",-1),t("option",{value:"envoyee"},"Envoyée",-1),t("option",{value:"payee"},"Payée",-1)])],512),[[x,s.form.statut]])])]),t("div",Dt,[e[55]||(e[55]=t("label",{class:"form-label"},"Notes / Conditions de paiement",-1)),r(t("textarea",{"onUpdate:modelValue":e[11]||(e[11]=o=>s.form.notes=o),class:"form-control",rows:"3",placeholder:"Exemple: Paiement par virement sous 30 jours..."},null,512),[[p,s.form.notes]])]),t("div",ht,[e[57]||(e[57]=t("h6",{class:"mb-3"},"Options Avancées",-1)),t("div",At,[t("div",Vt,[t("div",qt,[r(t("input",{"onUpdate:modelValue":e[12]||(e[12]=o=>s.form.avec_remise=o),type:"checkbox",class:"form-check-input",id:"avec_remise"},null,512),[[D,s.form.avec_remise]]),e[56]||(e[56]=t("label",{class:"form-check-label",for:"avec_remise"}," Appliquer une remise ",-1))])]),s.form.avec_remise?(d(),u("div",Ut,[r(t("input",{"onUpdate:modelValue":e[13]||(e[13]=o=>s.form.remise_pourcentage=o),onInput:e[14]||(e[14]=(...o)=>s.calculateTotals&&s.calculateTotals(...o)),type:"number",class:"form-control form-control-sm",placeholder:"Remise %",min:"0",max:"100",step:"0.01"},null,544),[[p,s.form.remise_pourcentage,void 0,{number:!0}]])])):v("",!0)])])]),t("div",Et,[t("button",{type:"button",onClick:e[15]||(e[15]=(...o)=>s.previousStep&&s.previousStep(...o)),class:"btn btn-secondary"},[...e[58]||(e[58]=[t("i",{class:"fas fa-arrow-left me-2"},null,-1),a("Précédent ",-1)])]),t("button",{type:"button",onClick:e[16]||(e[16]=(...o)=>s.nextStep&&s.nextStep(...o)),class:"btn btn-primary"},[...e[59]||(e[59]=[a(" Suivant ",-1),t("i",{class:"fas fa-arrow-right ms-2"},null,-1)])])])],512),[[T,s.step===2]]),r(t("div",Pt,[t("div",It,[e[62]||(e[62]=t("h5",{class:"mb-0"},[t("i",{class:"fas fa-list me-2"}),a(" Lignes de Facture ")],-1)),t("button",{type:"button",onClick:e[17]||(e[17]=(...o)=>s.addLigne&&s.addLigne(...o)),class:"btn btn-sm btn-success"},[...e[61]||(e[61]=[t("i",{class:"fas fa-plus me-2"},null,-1),a("Ajouter une ligne ",-1)])])]),t("div",Nt,[t("div",jt,[t("table",Bt,[e[65]||(e[65]=t("thead",{class:"table-light"},[t("tr",null,[t("th",{style:{width:"40%"}},"Désignation *"),t("th",{style:{width:"12%"},class:"text-center"},"Quantité *"),t("th",{style:{width:"18%"},class:"text-end"},"Prix Unit. HT *"),t("th",{style:{width:"18%"},class:"text-end"},"Total HT"),t("th",{style:{width:"12%"},class:"text-center"},"Actions")])],-1)),t("tbody",null,[(d(!0),u(k,null,S(s.form.lignes,(o,c)=>(d(),u("tr",{key:c},[t("td",null,[r(t("input",{"onUpdate:modelValue":f=>o.designation=f,type:"text",class:"form-control form-control-sm",placeholder:"Description du produit/service",required:""},null,8,Rt),[[p,o.designation]])]),t("td",null,[r(t("input",{"onUpdate:modelValue":f=>o.quantite=f,onInput:f=>s.calculateLigneTotal(o),type:"number",class:"form-control form-control-sm text-center",min:"0.01",step:"0.01",required:""},null,40,Ot),[[p,o.quantite,void 0,{number:!0}]])]),t("td",null,[r(t("input",{"onUpdate:modelValue":f=>o.prix_unitaire_ht=f,onInput:f=>s.calculateLigneTotal(o),type:"number",class:"form-control form-control-sm text-end",min:"0",step:"0.01",required:""},null,40,zt),[[p,o.prix_unitaire_ht,void 0,{number:!0}]])]),t("td",Ht,[t("strong",null,n(s.formatAmount(o.montant_total_ht))+" €",1)]),t("td",Mt,[t("button",{type:"button",onClick:f=>s.removeLigne(c),class:"btn btn-sm btn-outline-danger",disabled:s.form.lignes.length===1},[...e[63]||(e[63]=[t("i",{class:"fas fa-trash"},null,-1)])],8,Qt)])]))),128)),s.form.lignes.length===0?(d(),u("tr",Gt,[...e[64]||(e[64]=[t("td",{colspan:"5",class:"text-center text-muted"},' Aucune ligne ajoutée. Cliquez sur "Ajouter une ligne" pour commencer. ',-1)])])):v("",!0)])])]),t("div",Jt,[e[69]||(e[69]=t("h6",{class:"mb-2"},"Modèles Rapides",-1)),t("div",Kt,[t("button",{type:"button",onClick:e[18]||(e[18]=(...o)=>s.addTemplateLoyer&&s.addTemplateLoyer(...o)),class:"btn btn-outline-primary"},[...e[66]||(e[66]=[t("i",{class:"fas fa-home me-1"},null,-1),a("Loyer mensuel ",-1)])]),t("button",{type:"button",onClick:e[19]||(e[19]=(...o)=>s.addTemplateDepot&&s.addTemplateDepot(...o)),class:"btn btn-outline-primary"},[...e[67]||(e[67]=[t("i",{class:"fas fa-lock me-1"},null,-1),a("Dépôt de garantie ",-1)])]),t("button",{type:"button",onClick:e[20]||(e[20]=(...o)=>s.addTemplateFrais&&s.addTemplateFrais(...o)),class:"btn btn-outline-primary"},[...e[68]||(e[68]=[t("i",{class:"fas fa-cog me-1"},null,-1),a("Frais de gestion ",-1)])])])])]),t("div",Wt,[t("button",{type:"button",onClick:e[21]||(e[21]=(...o)=>s.previousStep&&s.previousStep(...o)),class:"btn btn-secondary"},[...e[70]||(e[70]=[t("i",{class:"fas fa-arrow-left me-2"},null,-1),a("Précédent ",-1)])]),t("button",{type:"button",onClick:e[22]||(e[22]=(...o)=>s.nextStep&&s.nextStep(...o)),class:"btn btn-primary",disabled:s.form.lignes.length===0},[...e[71]||(e[71]=[a(" Suivant ",-1),t("i",{class:"fas fa-arrow-right ms-2"},null,-1)])],8,Xt)])],512),[[T,s.step===3]]),r(t("div",Yt,[e[93]||(e[93]=t("div",{class:"card-header"},[t("h5",{class:"mb-0"},[t("i",{class:"fas fa-check-circle me-2"}),a(" Récapitulatif et Validation ")])],-1)),t("div",Zt,[t("div",$t,[t("div",te,[e[75]||(e[75]=t("h6",{class:"text-primary mb-3"},"Informations Client",-1)),t("p",ee,[e[72]||(e[72]=t("strong",null,"Client :",-1)),a(" "+n(s.selectedClient?.prenom)+" "+n(s.selectedClient?.nom),1)]),t("p",se,[e[73]||(e[73]=t("strong",null,"Email :",-1)),a(" "+n(s.selectedClient?.email),1)]),t("p",oe,[e[74]||(e[74]=t("strong",null,"Contrat :",-1)),a(" "+n(s.selectedContrat?.numero_contrat||"Sans contrat"),1)])]),t("div",ne,[e[82]||(e[82]=t("h6",{class:"text-primary mb-3"},"Informations Facture",-1)),t("p",le,[e[76]||(e[76]=t("strong",null,"N° Facture :",-1)),a(" "+n(s.form.numero_facture||"AUTO"),1)]),t("p",ae,[e[77]||(e[77]=t("strong",null,"Date émission :",-1)),a(" "+n(s.formatDate(s.form.date_emission)),1)]),t("p",ie,[e[78]||(e[78]=t("strong",null,"Date échéance :",-1)),a(" "+n(s.formatDate(s.form.date_echeance)),1)]),t("p",re,[e[79]||(e[79]=t("strong",null,"Type :",-1)),a(" "+n(s.getTypeLabel(s.form.type_facture)),1)]),t("p",de,[e[80]||(e[80]=t("strong",null,"Statut :",-1)),e[81]||(e[81]=a()),t("span",{class:b(s.getStatusBadge(s.form.statut))},n(s.getStatusLabel(s.form.statut)),3)])])]),t("div",me,[e[84]||(e[84]=t("h6",{class:"text-primary mb-3"},"Lignes de Facture",-1)),t("div",ue,[t("table",ce,[e[83]||(e[83]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"Désignation"),t("th",{class:"text-center"},"Qté"),t("th",{class:"text-end"},"PU HT"),t("th",{class:"text-end"},"Total HT")])],-1)),t("tbody",null,[(d(!0),u(k,null,S(s.form.lignes,(o,c)=>(d(),u("tr",{key:c},[t("td",null,n(o.designation),1),t("td",fe,n(o.quantite),1),t("td",be,n(s.formatAmount(o.prix_unitaire_ht))+" €",1),t("td",ve,n(s.formatAmount(o.montant_total_ht))+" €",1)]))),128))])])])]),t("div",pe,[e[87]||(e[87]=t("div",{class:"col-md-8"},null,-1)),t("div",_e,[t("table",ge,[t("tr",null,[e[85]||(e[85]=t("th",null,"Total HT :",-1)),t("td",ye,n(s.formatAmount(s.totals.montant_ht))+" €",1)]),s.form.avec_remise&&s.form.remise_pourcentage>0?(d(),u("tr",xe,[t("th",null,"Remise ("+n(s.form.remise_pourcentage)+"%) :",1),t("td",Ce,"- "+n(s.formatAmount(s.totals.remise))+" €",1)])):v("",!0),t("tr",null,[t("th",null,"TVA ("+n(s.form.taux_tva)+"%) :",1),t("td",ke,n(s.formatAmount(s.totals.montant_tva))+" €",1)]),t("tr",Se,[e[86]||(e[86]=t("th",{class:"fs-5"},"Total TTC :",-1)),t("td",Te,[t("strong",null,n(s.formatAmount(s.totals.montant_ttc))+" €",1)])])])])]),t("div",Fe,[t("div",we,[r(t("input",{"onUpdate:modelValue":e[23]||(e[23]=o=>s.sendEmail=o),type:"checkbox",class:"form-check-input",id:"sendEmail"},null,512),[[D,s.sendEmail]]),e[88]||(e[88]=t("label",{class:"form-check-label",for:"sendEmail"},[t("i",{class:"fas fa-envelope me-1"}),a(" Envoyer la facture par email au client après création ")],-1))]),t("div",Le,[r(t("input",{"onUpdate:modelValue":e[24]||(e[24]=o=>s.generatePDF=o),type:"checkbox",class:"form-check-input",id:"generatePDF",checked:""},null,512),[[D,s.generatePDF]]),e[89]||(e[89]=t("label",{class:"form-check-label",for:"generatePDF"},[t("i",{class:"fas fa-file-pdf me-1"}),a(" Générer automatiquement le PDF ")],-1))])])]),t("div",De,[t("button",{type:"button",onClick:e[25]||(e[25]=(...o)=>s.previousStep&&s.previousStep(...o)),class:"btn btn-secondary"},[...e[90]||(e[90]=[t("i",{class:"fas fa-arrow-left me-2"},null,-1),a("Précédent ",-1)])]),t("button",{type:"submit",class:"btn btn-success btn-lg",disabled:s.processing},[s.processing?(d(),u("span",Ae,[...e[91]||(e[91]=[t("span",{class:"spinner-border spinner-border-sm me-2"},null,-1),a(" Création en cours... ",-1)])])):(d(),u("span",Ve,[...e[92]||(e[92]=[t("i",{class:"fas fa-check me-2"},null,-1),a("Créer la Facture ",-1)])]))],8,he)])],512),[[T,s.step===4]])],32)]),_:1})}const Je=B(G,[["render",qe],["__scopeId","data-v-22343dea"]]);export{Je as default};
